var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function i(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function a(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function s(t,e,n){t.$$.on_destroy.push(a(e,n))}const u="undefined"!=typeof window;let l=u?()=>window.performance.now():()=>Date.now(),f=u?t=>requestAnimationFrame(t):t;const d=new Set;function h(t){d.forEach(e=>{e.c(t)||(d.delete(e),e.f())}),0!==d.size&&f(h)}function p(t,e){t.appendChild(e)}function m(t,e,n){t.insertBefore(e,n||null)}function g(t){t.parentNode.removeChild(t)}function v(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function y(t){return document.createElement(t)}function $(t){return document.createTextNode(t)}function b(){return $(" ")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function _(t,e){e=""+e,t.data!==e&&(t.data=e)}function j(t,e){(null!=e||t.value)&&(t.value=e)}function E(t,e,n){t.classList[n?"add":"remove"](e)}function O(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}let C,k,S=0,A={};function T(t,e,n,r,o,i,c,a=0){const s=16.666/r;let u="{\n";for(let t=0;t<=1;t+=s){const r=e+(n-e)*i(t);u+=100*t+`%{${c(r,1-r)}}\n`}const l=u+`100% {${c(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${a}`;if(!A[f]){if(!C){const t=y("style");document.head.appendChild(t),C=t.sheet}A[f]=!0,C.insertRule(`@keyframes ${f} ${l}`,C.cssRules.length)}const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${f} ${r}ms linear ${o}ms 1 both`,S+=1,f}function I(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--S&&f(()=>{if(S)return;let t=C.cssRules.length;for(;t--;)C.deleteRule(t);A={}})}function P(t){k=t}function N(){if(!k)throw new Error("Function called outside component initialization");return k}function M(t){N().$$.on_mount.push(t)}const R=[],q=[],G=[],F=[],B=Promise.resolve();let D=!1;function z(t){G.push(t)}let U=!1;const H=new Set;function V(){if(!U){U=!0;do{for(let t=0;t<R.length;t+=1){const e=R[t];P(e),Y(e.$$)}for(R.length=0;q.length;)q.pop()();for(let t=0;t<G.length;t+=1){const e=G[t];H.has(e)||(H.add(e),e())}G.length=0}while(R.length);for(;F.length;)F.pop()();D=!1,U=!1,H.clear()}}function Y(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(z)}}let W;function Z(t,e,n){t.dispatchEvent(O(`${e?"intro":"outro"}${n}`))}const J=new Set;let K;function Q(){K={r:0,c:[],p:K}}function X(){K.r||o(K.c),K=K.p}function tt(t,e){t&&t.i&&(J.delete(t),t.i(e))}function et(t,e,n,r){if(t&&t.o){if(J.has(t))return;J.add(t),K.c.push(()=>{J.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const nt={duration:0};function rt(n,r,c,a){let s=r(n,c),u=a?0:1,p=null,m=null,g=null;function v(){g&&I(n,g)}function y(t,e){const n=t.b-u;return e*=Math.abs(n),{a:u,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function $(r){const{delay:i=0,duration:c=300,easing:a=e,tick:$=t,css:b}=s||nt,w={start:l()+i,b:r};r||(w.group=K,K.r+=1),p?m=w:(b&&(v(),g=T(n,u,r,c,i,a,b)),r&&$(0,1),p=y(w,c),z(()=>Z(n,r,"start")),function(t){let e;0===d.size&&f(h),new Promise(n=>{d.add(e={c:t,f:n})})}(t=>{if(m&&t>m.start&&(p=y(m,c),m=null,Z(n,p.b,"start"),b&&(v(),g=T(n,u,p.b,p.duration,0,a,s.css))),p)if(t>=p.end)$(u=p.b,1-u),Z(n,p.b,"end"),m||(p.b?v():--p.group.r||o(p.group.c)),p=null;else if(t>=p.start){const e=t-p.start;u=p.a+p.d*a(e/p.duration),$(u,1-u)}return!(!p&&!m)}))}return{run(t){i(s)?(W||(W=Promise.resolve(),W.then(()=>{W=null})),W).then(()=>{s=s(),$(t)}):$(t)},end(){v(),p=m=null}}}function ot(t,e){et(t,1,1,()=>{e.delete(t.key)})}function it(t){t&&t.c()}function ct(t,e,r){const{fragment:c,on_mount:a,on_destroy:s,after_update:u}=t.$$;c&&c.m(e,r),z(()=>{const e=a.map(n).filter(i);s?s.push(...e):o(e),t.$$.on_mount=[]}),u.forEach(z)}function at(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function st(t,e){-1===t.$$.dirty[0]&&(R.push(t),D||(D=!0,B.then(V)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function ut(e,n,i,c,a,s,u=[-1]){const l=k;P(e);const f=n.props||{},d=e.$$={fragment:null,ctx:null,props:s,update:t,not_equal:a,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:r(),dirty:u};let h=!1;d.ctx=i?i(e,f,(t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&a(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),h&&st(e,t)),n}):[],d.update(),h=!0,o(d.before_update),d.fragment=!!c&&c(d.ctx),n.target&&(n.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):d.fragment&&d.fragment.c(),n.intro&&tt(e.$$.fragment),ct(e,n.target,n.anchor),V()),P(l)}class lt{$destroy(){at(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}var ft=function(t,e){return t(e={exports:{}},e.exports),e.exports}((function(t){var e=function(t){var e=Object.prototype,n=e.hasOwnProperty,r="function"==typeof Symbol?Symbol:{},o=r.iterator||"@@iterator",i=r.asyncIterator||"@@asyncIterator",c=r.toStringTag||"@@toStringTag";function a(t,e,n,r){var o=e&&e.prototype instanceof l?e:l,i=Object.create(o.prototype),c=new x(r||[]);return i._invoke=function(t,e,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return L()}for(n.method=o,n.arg=i;;){var c=n.delegate;if(c){var a=$(c,n);if(a){if(a===u)continue;return a}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var l=s(t,e,n);if("normal"===l.type){if(r=n.done?"completed":"suspendedYield",l.arg===u)continue;return{value:l.arg,done:n.done}}"throw"===l.type&&(r="completed",n.method="throw",n.arg=l.arg)}}}(t,n,c),i}function s(t,e,n){try{return{type:"normal",arg:t.call(e,n)}}catch(t){return{type:"throw",arg:t}}}t.wrap=a;var u={};function l(){}function f(){}function d(){}var h={};h[o]=function(){return this};var p=Object.getPrototypeOf,m=p&&p(p(_([])));m&&m!==e&&n.call(m,o)&&(h=m);var g=d.prototype=l.prototype=Object.create(h);function v(t){["next","throw","return"].forEach((function(e){t[e]=function(t){return this._invoke(e,t)}}))}function y(t,e){var r;this._invoke=function(o,i){function c(){return new e((function(r,c){!function r(o,i,c,a){var u=s(t[o],t,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?e.resolve(f.__await).then((function(t){r("next",t,c,a)}),(function(t){r("throw",t,c,a)})):e.resolve(f).then((function(t){l.value=t,c(l)}),(function(t){return r("throw",t,c,a)}))}a(u.arg)}(o,i,r,c)}))}return r=r?r.then(c,c):c()}}function $(t,e){var n=t.iterator[e.method];if(void 0===n){if(e.delegate=null,"throw"===e.method){if(t.iterator.return&&(e.method="return",e.arg=void 0,$(t,e),"throw"===e.method))return u;e.method="throw",e.arg=new TypeError("The iterator does not provide a 'throw' method")}return u}var r=s(n,t.iterator,e.arg);if("throw"===r.type)return e.method="throw",e.arg=r.arg,e.delegate=null,u;var o=r.arg;return o?o.done?(e[t.resultName]=o.value,e.next=t.nextLoc,"return"!==e.method&&(e.method="next",e.arg=void 0),e.delegate=null,u):o:(e.method="throw",e.arg=new TypeError("iterator result is not an object"),e.delegate=null,u)}function b(t){var e={tryLoc:t[0]};1 in t&&(e.catchLoc=t[1]),2 in t&&(e.finallyLoc=t[2],e.afterLoc=t[3]),this.tryEntries.push(e)}function w(t){var e=t.completion||{};e.type="normal",delete e.arg,t.completion=e}function x(t){this.tryEntries=[{tryLoc:"root"}],t.forEach(b,this),this.reset(!0)}function _(t){if(t){var e=t[o];if(e)return e.call(t);if("function"==typeof t.next)return t;if(!isNaN(t.length)){var r=-1,i=function e(){for(;++r<t.length;)if(n.call(t,r))return e.value=t[r],e.done=!1,e;return e.value=void 0,e.done=!0,e};return i.next=i}}return{next:L}}function L(){return{value:void 0,done:!0}}return f.prototype=g.constructor=d,d.constructor=f,d[c]=f.displayName="GeneratorFunction",t.isGeneratorFunction=function(t){var e="function"==typeof t&&t.constructor;return!!e&&(e===f||"GeneratorFunction"===(e.displayName||e.name))},t.mark=function(t){return Object.setPrototypeOf?Object.setPrototypeOf(t,d):(t.__proto__=d,c in t||(t[c]="GeneratorFunction")),t.prototype=Object.create(g),t},t.awrap=function(t){return{__await:t}},v(y.prototype),y.prototype[i]=function(){return this},t.AsyncIterator=y,t.async=function(e,n,r,o,i){void 0===i&&(i=Promise);var c=new y(a(e,n,r,o),i);return t.isGeneratorFunction(n)?c:c.next().then((function(t){return t.done?t.value:c.next()}))},v(g),g[c]="Generator",g[o]=function(){return this},g.toString=function(){return"[object Generator]"},t.keys=function(t){var e=[];for(var n in t)e.push(n);return e.reverse(),function n(){for(;e.length;){var r=e.pop();if(r in t)return n.value=r,n.done=!1,n}return n.done=!0,n}},t.values=_,x.prototype={constructor:x,reset:function(t){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(w),!t)for(var e in this)"t"===e.charAt(0)&&n.call(this,e)&&!isNaN(+e.slice(1))&&(this[e]=void 0)},stop:function(){this.done=!0;var t=this.tryEntries[0].completion;if("throw"===t.type)throw t.arg;return this.rval},dispatchException:function(t){if(this.done)throw t;var e=this;function r(n,r){return c.type="throw",c.arg=t,e.next=n,r&&(e.method="next",e.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],c=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var a=n.call(i,"catchLoc"),s=n.call(i,"finallyLoc");if(a&&s){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(a){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!s)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(t,e){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===t||"continue"===t)&&i.tryLoc<=e&&e<=i.finallyLoc&&(i=null);var c=i?i.completion:{};return c.type=t,c.arg=e,i?(this.method="next",this.next=i.finallyLoc,u):this.complete(c)},complete:function(t,e){if("throw"===t.type)throw t.arg;return"break"===t.type||"continue"===t.type?this.next=t.arg:"return"===t.type?(this.rval=this.arg=t.arg,this.method="return",this.next="end"):"normal"===t.type&&e&&(this.next=e),u},finish:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.finallyLoc===t)return this.complete(n.completion,n.afterLoc),w(n),u}},catch:function(t){for(var e=this.tryEntries.length-1;e>=0;--e){var n=this.tryEntries[e];if(n.tryLoc===t){var r=n.completion;if("throw"===r.type){var o=r.arg;w(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(t,e,n){return this.delegate={iterator:_(t),resultName:e,nextLoc:n},"next"===this.method&&(this.arg=void 0),u}},t}(t.exports);try{regeneratorRuntime=e}catch(t){Function("r","regeneratorRuntime = r")(e)}}));function dt(t,e,n,r,o,i,c){try{var a=t[i](c),s=a.value}catch(t){return void n(t)}a.done?e(s):Promise.resolve(s).then(r,o)}var ht=function(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var i=t.apply(e,n);function c(t){dt(i,r,o,c,a,"next",t)}function a(t){dt(i,r,o,c,a,"throw",t)}c(void 0)}))}};var pt=function(t){if(Array.isArray(t))return t};var mt=function(t,e){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)){var n=[],r=!0,o=!1,i=void 0;try{for(var c,a=t[Symbol.iterator]();!(r=(c=a.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{r||null==a.return||a.return()}finally{if(o)throw i}}return n}};var gt=function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")};var vt=function(t,e){return pt(t)||mt(t,e)||gt()};const yt=[];function $t(e,n=t){let r;const o=[];function i(t){if(c(e,t)&&(e=t,r)){const t=!yt.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),yt.push(n,e)}if(t){for(let t=0;t<yt.length;t+=2)yt[t][0](yt[t+1]);yt.length=0}}}return{set:i,update:function(t){i(t(e))},subscribe:function(c,a=t){const s=[c,a];return o.push(s),1===o.length&&(r=n(i)||t),c(e),()=>{const t=o.indexOf(s);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function bt(e,n,r){const c=!Array.isArray(e),s=c?[e]:e,u=n.length<2;return{subscribe:$t(r,e=>{let r=!1;const l=[];let f=0,d=t;const h=()=>{if(f)return;d();const r=n(c?l[0]:l,e);u?e(r):d=i(r)?r:t},p=s.map((t,e)=>a(t,t=>{l[e]=t,f&=~(1<<e),r&&h()},()=>{f|=1<<e}));return r=!0,h(),function(){o(p),d()}}).subscribe}}var wt=$t(),xt=$t(),_t=$t([]),Lt=$t({}),jt=$t({}),Et=$t(),Ot=$t(),Ct=$t(),kt=bt([_t,Et],(function(t){var e=vt(t,2),n=e[0],r=e[1];return n.indexOf(r)})),St=bt(jt,(function(t){return function(t){return Object.values(t).reduce((function(t,e){return e.Cases.reduce((function(t,e){return e>t?e:t}),t)}),0)}(t)})),At=bt(jt,(function(t){return function(t){return Object.entries(t).reduce((function(t,e){var n=vt(e,2),r=n[0],o=n[1],i=!0,c=!1,a=void 0;try{for(var s,u=o.Codes[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){t[s.value]={Name:r,Cases:o.Cases}}}catch(t){c=!0,a=t}finally{try{i||null==u.return||u.return()}finally{if(c)throw a}}return t}),{})}(t)})),Tt=bt([wt,At,St,kt],(function(t){return t}));function It(){return Pt.apply(this,arguments)}function Pt(){return(Pt=ht(ft.mark((function t(){var e,n,r;return ft.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=fetch("./data/Counties_and_Unitary_Authorities_April_2019_Boundaries_EW_BUC.json").then((function(t){return t.json()})).then((function(t){return wt.set(t)})).then((function(){return console.log("Boundaries loaded")})),n=fetch("./data/Population-mid-2018.json").then((function(t){return t.json()})).then((function(t){return xt.set(t)})).then((function(){return console.log("Population loaded")})),r=fetch("./data/Coronavirus-COVID-19-number-of-cases-in-England.json").then((function(t){return t.json()})).then((function(t){_t.set(t.Labels),Lt.set(t.Summary),jt.set(t.CasesByRegion)})).then((function(){return console.log("Cases loaded")})),t.abrupt("return",Promise.all([e,n,r]).catch((function(t){return console.error(t)})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Nt(e){let n;return{c(){n=y("header"),n.innerHTML='<h1 class="svelte-r1hr4i">Interactive map of Coronavirus (COVID-19) cases (cumulative, lab-confirmed) in England</h1>',x(n,"class","svelte-r1hr4i")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&g(n)}}}_t.subscribe((function(t){t&&t.length>0&&Et.set(t[t.length-1])}));class Mt extends lt{constructor(t){super(),ut(this,t,null,Nt,c,{})}}var Rt=function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}};var qt=function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)};var Gt=function(){throw new TypeError("Invalid attempt to spread non-iterable instance")};var Ft,Bt,Dt,zt=function(t){return Rt(t)||qt(t)||Gt()},Ut={lat:52.914639,lon:-1.47189},Ht=["region-unknown","region-zero","region-one","region-two","region-three","region-four","region-five"];function Vt(t){var e=t.feature.properties.mergedAuthority||t.feature.properties.ctyua19nm,n=t.feature.properties.casesCount;return null==n?"".concat(e,"<br/>No data"):"".concat(e,"<br/>").concat(n," case").concat(1==n?"":"s")}function Yt(t,e){var n=Vt(e);e.bindPopup(n,{className:"region-popup"}).addTo(Ft),e.openPopup(t)}function Wt(t){var e=Array(Ht.length-2);return[0].concat(zt(Array.from(e,(function(e,n){return Math.ceil(t/(Ht.length-2)*n+1)}))))}function Zt(e){let n,r;return{c(){n=y("section"),r=y("div"),x(r,"class","svelte-n9bg7i"),x(n,"class","svelte-n9bg7i")},m(t,o){m(t,n,o),p(n,r),e[1](r)},p:t,i:t,o:t,d(t){t&&g(n),e[1](null)}}}function Jt(t,e,n){let r;return M(()=>function(t){null==Ft&&((Ft=L.map(t,{center:Ut,zoom:7})).getPane("overlayPane").classList.add("blend-overlay-pane"),L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}).addTo(Ft))}(r)),[r,function(t){q[t?"unshift":"push"](()=>{n(0,r=t)})}]}wt.subscribe((function(t){return function(t){if(null==Ft||null==t)return;Dt&&Dt.remove();(Dt=L.geoJSON(t,{style:function(t){return{fillOpacity:.5,weight:0}},onEachFeature:function(t,e){e.on({click:function(t){return Yt(t.latlng,t.sourceTarget)}})}})).addTo(Ft)}(t)})),St.subscribe((function(t){return function(t){if(null==Ft||null==t)return;Bt&&Bt.remove();(Bt=L.control({position:"topright"})).onAdd=function(){var e=L.DomUtil.create("div","info legend"),n=!0,r=!1,o=void 0;try{for(var i,c=function(t){if(0==t)return[];var e=Wt(t),n=e.map((function(t){return t-1}));return n.shift(),n.push(t),["Unknown"].concat(zt(e.map((function(t,e){return 0==e?"0 cases":"".concat(t,"-").concat(n[e]," cases")})))).map((function(t,e){return{label:t,color:Ht[e]}}))}(t)[Symbol.iterator]();!(n=(i=c.next()).done);n=!0){var a=i.value;e.innerHTML+='<div class="keyitem">\n\t\t\t\t<div class="color '.concat(a.color,'"><div></div></div>\n\t\t\t\t<div class="label">').concat(a.label,"</div>\n\t\t\t</div>")}}catch(t){r=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return e},Bt.addTo(Ft)}(t)})),Tt.subscribe((function(t){var e=vt(t,4);e[0];!function(t,e,n){if(null==Dt||e<=0||-1==n)return;for(var r=Wt(e),o=function(){var e=c[i],o=t[e.feature.properties.ctyua19cd],u=o?o.Cases[n]:null;if(a=r.findIndex((function(t){return null==u||u<t})),s=a>-1?Ht[a]:Ht[Ht.length-1],e._path.setAttribute("fill-opacity",1),e._path.setAttribute("class","leaflet-interactive "+s),e.feature.properties.casesCount=u,o&&e.feature.properties.ctyua19nm!=o.Name&&(e.feature.properties.mergedAuthority=o.Name),e.isPopupOpen()){var l=e.getPopup(),f=Vt(e);l.setContent(f)}},i=0,c=Object.values(Dt._layers);i<c.length;i++){var a,s;o()}}(e[1],e[2],e[3])})),Ot.subscribe((function(t){return function(t){if(null==Ft)return;if(t&&t.length>0){var e=Object.values(Dt._layers).find((function(e){return t==e.feature.properties.ctyua19cd}));if(e)Yt(L.latLng(e.feature.properties.lat,e.feature.properties.long),e),Ft.setView(e.getCenter(),9,{animate:!0}),window.scrollTo(0,0)}else Ft.closePopup(),Ft.setView(Ut,7,{animate:!0}),window.scrollTo(0,0)}(t)}));class Kt extends lt{constructor(t){super(),ut(this,t,Jt,Zt,c,{})}}function Qt(e){let n,r,o,i,c,a,s;return{c(){n=y("section"),r=y("h2"),o=$(e[0]),i=b(),c=y("input"),x(r,"class","svelte-m3mxtw"),x(c,"type","range"),x(c,"min","0"),x(c,"max",a=e[1].length-1),c.value=e[2],x(c,"class","svelte-m3mxtw"),x(n,"class","svelte-m3mxtw")},m(t,a){m(t,n,a),p(n,r),p(r,o),p(n,i),p(n,c),s=w(c,"input",e[3])},p(t,[e]){1&e&&_(o,t[0]),2&e&&a!==(a=t[1].length-1)&&x(c,"max",a),4&e&&(c.value=t[2])},i:t,o:t,d(t){t&&g(n),s()}}}function Xt(t,e,n){let r,o,i;s(t,Et,t=>n(4,r=t)),s(t,_t,t=>n(1,o=t)),s(t,kt,t=>n(2,i=t));const c=new Intl.DateTimeFormat("en-GB",{weekday:"short",year:"numeric",month:"long",day:"numeric"});let a="Date";return t.$$.update=()=>{16&t.$$.dirty&&r&&n(0,a=c.format(new Date(r)))},[a,o,i,t=>{Et.set(o[t.target.value])}]}class te extends lt{constructor(t){super(),ut(this,t,Xt,Qt,c,{})}}function ee(e){let n,r,i,c,a,s,u,l,f;return{c(){n=y("section"),r=y("h2"),r.textContent="Search for a region",i=b(),c=y("div"),a=y("input"),s=b(),u=y("div"),l=y("button"),l.innerHTML='<img src="img/close.svg" alt="clear" class="svelte-qj2m8d">',x(r,"class","svelte-qj2m8d"),x(a,"class","svelte-qj2m8d"),x(l,"class","svelte-qj2m8d"),x(u,"class","svelte-qj2m8d"),x(c,"class","inputgroup svelte-qj2m8d"),x(n,"class","svelte-qj2m8d")},m(t,o){m(t,n,o),p(n,r),p(n,i),p(n,c),p(c,a),j(a,e[0]),p(c,s),p(c,u),p(u,l),f=[w(a,"input",e[2]),w(l,"click",e[1])]},p(t,[e]){1&e&&a.value!==t[0]&&j(a,t[0])},i:t,o:t,d(t){t&&g(n),o(f)}}}function ne(t,e,n){let r;s(t,Ct,t=>n(0,r=t));return[r,()=>Ct.set(""),function(){r=this.value,Ct.set(r)}]}class re extends lt{constructor(t){super(),ut(this,t,ne,ee,c,{})}}function oe(e){let n,r,o;const i=new te({}),c=new re({});return{c(){n=y("section"),it(i.$$.fragment),r=b(),it(c.$$.fragment),x(n,"class","svelte-1dtbawg")},m(t,e){m(t,n,e),ct(i,n,null),p(n,r),ct(c,n,null),o=!0},p:t,i(t){o||(tt(i.$$.fragment,t),tt(c.$$.fragment,t),o=!0)},o(t){et(i.$$.fragment,t),et(c.$$.fragment,t),o=!1},d(t){t&&g(n),at(i),at(c)}}}class ie extends lt{constructor(t){super(),ut(this,t,null,oe,c,{})}}function ce(t,{delay:n=0,duration:r=400,easing:o=e}){const i=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:o,css:t=>`opacity: ${t*i}`}}function ae(t){let e,n,r,o,i,c,a,s,u,l,f,d;return{c(){e=y("div"),n=y("div"),r=$(t[0]),o=b(),i=y("span"),c=$(t[2]),a=b(),s=y("span"),u=$(t[3]),x(n,"class","name svelte-4wr1yv"),x(i,"class","count svelte-4wr1yv"),x(s,"class","change svelte-4wr1yv"),E(s,"increase",t[4]),E(s,"decrease",t[5]),E(s,"same",t[6]),x(e,"class","item svelte-4wr1yv"),E(e,"hoverable",t[1]),E(e,"selected",t[7])},m(l,h){m(l,e,h),p(e,n),p(n,r),p(e,o),p(e,i),p(i,c),p(e,a),p(e,s),p(s,u),f=!0,d=w(e,"click",t[12])},p(t,[n]){(!f||1&n)&&_(r,t[0]),(!f||4&n)&&_(c,t[2]),(!f||8&n)&&_(u,t[3]),16&n&&E(s,"increase",t[4]),32&n&&E(s,"decrease",t[5]),64&n&&E(s,"same",t[6]),2&n&&E(e,"hoverable",t[1]),128&n&&E(e,"selected",t[7])},i(t){f||(z(()=>{l||(l=rt(e,ce,{},!0)),l.run(1)}),f=!0)},o(t){l||(l=rt(e,ce,{},!1)),l.run(0),f=!1},d(t){t&&g(e),t&&l&&l.end(),d()}}}function se(t,e,n){let{name:r}=e,{cases:o}=e,{caseIndex:i}=e,{code:c=null}=e,{focusRegion:a=null}=e;const s=function(){const t=N();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=O(e,n);r.slice().forEach(e=>{e.call(t,o)})}}}();let u,l,f,d,h,p;return t.$set=t=>{"name"in t&&n(0,r=t.name),"cases"in t&&n(9,o=t.cases),"caseIndex"in t&&n(10,i=t.caseIndex),"code"in t&&n(1,c=t.code),"focusRegion"in t&&n(11,a=t.focusRegion)},t.$$.update=()=>{3598&t.$$.dirty&&(n(2,u=o[i]),n(3,l=0==i?u:u-o[Math.max(i-1,0)]),n(4,f=l>0),n(5,d=l<0),n(6,h=0==l),n(7,p=c&&c==a))},[r,c,u,l,f,d,h,p,s,o,i,a,()=>s("click",c)]}class ue extends lt{constructor(t){super(),ut(this,t,se,ae,c,{name:0,cases:9,caseIndex:10,code:1,focusRegion:11})}}function le(t,e,n){const r=t.slice();return r[2]=e[n][0],r[3]=e[n][1],r}function fe(t){let e;const n=new ue({props:{name:t[2],cases:t[3],caseIndex:t[1]}});return{c(){it(n.$$.fragment)},m(t,r){ct(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.name=t[2]),1&e&&(r.cases=t[3]),2&e&&(r.caseIndex=t[1]),n.$set(r)},i(t){e||(tt(n.$$.fragment,t),e=!0)},o(t){et(n.$$.fragment,t),e=!1},d(t){at(n,t)}}}function de(t){let e,n,r,o,i,c=Object.entries(t[0]),a=[];for(let e=0;e<c.length;e+=1)a[e]=fe(le(t,c,e));const s=t=>et(a[t],1,1,()=>{a[t]=null});return{c(){e=y("section"),n=y("h2"),n.textContent="Summary",r=b(),o=y("div");for(let t=0;t<a.length;t+=1)a[t].c();x(n,"class","svelte-cgyc1b"),x(o,"class","container svelte-cgyc1b"),x(e,"class","svelte-cgyc1b")},m(t,c){m(t,e,c),p(e,n),p(e,r),p(e,o);for(let t=0;t<a.length;t+=1)a[t].m(o,null);i=!0},p(t,[e]){if(3&e){let n;for(c=Object.entries(t[0]),n=0;n<c.length;n+=1){const r=le(t,c,n);a[n]?(a[n].p(r,e),tt(a[n],1)):(a[n]=fe(r),a[n].c(),tt(a[n],1),a[n].m(o,null))}for(Q(),n=c.length;n<a.length;n+=1)s(n);X()}},i(t){if(!i){for(let t=0;t<c.length;t+=1)tt(a[t]);i=!0}},o(t){a=a.filter(Boolean);for(let t=0;t<a.length;t+=1)et(a[t]);i=!1},d(t){t&&g(e),v(a,t)}}}function he(t,e,n){let r,o;return s(t,Lt,t=>n(0,r=t)),s(t,kt,t=>n(1,o=t)),[r,o]}class pe extends lt{constructor(t){super(),ut(this,t,he,de,c,{})}}function me(e){let n,r;return{c(){n=y("h2"),r=$(e[0]),x(n,"class","svelte-cofq7b")},m(t,e){m(t,n,e),p(n,r)},p(t,[e]){1&e&&_(r,t[0])},i:t,o:t,d(t){t&&g(n)}}}function ge(t,e,n){let{prefix:r}=e;return t.$set=t=>{"prefix"in t&&n(0,r=t.prefix)},[r]}class ve extends lt{constructor(t){super(),ut(this,t,ge,me,c,{prefix:0})}}function ye(t,e,n){const r=t.slice();return r[12]=e[n].name,r[13]=e[n].item,r}function $e(t,e,n){const r=t.slice();return r[8]=e[n][0],r[9]=e[n][1],r}function be(t,e){let n,r;const o=new ue({props:{name:e[12],cases:e[13].Cases,caseIndex:e[2],code:e[13].Codes[0],focusRegion:e[1]}});return o.$on("click",e[3]),{key:t,first:null,c(){n=$(""),it(o.$$.fragment),this.first=n},m(t,e){m(t,n,e),ct(o,t,e),r=!0},p(t,e){const n={};1&e&&(n.name=t[12]),1&e&&(n.cases=t[13].Cases),4&e&&(n.caseIndex=t[2]),1&e&&(n.code=t[13].Codes[0]),2&e&&(n.focusRegion=t[1]),o.$set(n)},i(t){r||(tt(o.$$.fragment,t),r=!0)},o(t){et(o.$$.fragment,t),r=!1},d(t){t&&g(n),at(o,t)}}}function we(t){let e,n,r,o=[],i=new Map;const c=new ve({props:{prefix:t[8]}});let a=t[9];const s=t=>t[12];for(let e=0;e<a.length;e+=1){let n=ye(t,a,e),r=s(n);i.set(r,o[e]=be(r,n))}return{c(){it(c.$$.fragment),e=b(),n=y("div");for(let t=0;t<o.length;t+=1)o[t].c();x(n,"class","container svelte-ox950")},m(t,i){ct(c,t,i),m(t,e,i),m(t,n,i);for(let t=0;t<o.length;t+=1)o[t].m(n,null);r=!0},p(t,e){const r={};if(1&e&&(r.prefix=t[8]),c.$set(r),15&e){const r=t[9];Q(),o=function(t,e,n,r,o,i,c,a,s,u,l,f){let d=t.length,h=i.length,p=d;const m={};for(;p--;)m[t[p].key]=p;const g=[],v=new Map,y=new Map;for(p=h;p--;){const t=f(o,i,p),a=n(t);let s=c.get(a);s?r&&s.p(t,e):(s=u(a,t),s.c()),v.set(a,g[p]=s),a in m&&y.set(a,Math.abs(p-m[a]))}const $=new Set,b=new Set;function w(t){tt(t,1),t.m(a,l),c.set(t.key,t),l=t.first,h--}for(;d&&h;){const e=g[h-1],n=t[d-1],r=e.key,o=n.key;e===n?(l=e.first,d--,h--):v.has(o)?!c.has(r)||$.has(r)?w(e):b.has(o)?d--:y.get(r)>y.get(o)?(b.add(r),w(e)):($.add(o),d--):(s(n,c),d--)}for(;d--;){const e=t[d];v.has(e.key)||s(e,c)}for(;h;)w(g[h-1]);return g}(o,e,s,1,t,r,i,n,ot,be,null,ye),X()}},i(t){if(!r){tt(c.$$.fragment,t);for(let t=0;t<a.length;t+=1)tt(o[t]);r=!0}},o(t){et(c.$$.fragment,t);for(let t=0;t<o.length;t+=1)et(o[t]);r=!1},d(t){at(c,t),t&&g(e),t&&g(n);for(let t=0;t<o.length;t+=1)o[t].d()}}}function xe(t){let e,n,r;const o=new ve({props:{prefix:"-"}});return{c(){it(o.$$.fragment),e=b(),n=y("div"),n.textContent="No regions found",x(n,"class","no-regions svelte-ox950")},m(t,i){ct(o,t,i),m(t,e,i),m(t,n,i),r=!0},i(t){r||(tt(o.$$.fragment,t),r=!0)},o(t){et(o.$$.fragment,t),r=!1},d(t){at(o,t),t&&g(e),t&&g(n)}}}function _e(t){let e,n,r,o=0==Object.keys(t[0]).length,i=Object.entries(t[0]),c=[];for(let e=0;e<i.length;e+=1)c[e]=we($e(t,i,e));const a=t=>et(c[t],1,1,()=>{c[t]=null});let s=o&&xe();return{c(){e=y("section");for(let t=0;t<c.length;t+=1)c[t].c();n=b(),s&&s.c(),x(e,"class","svelte-ox950")},m(t,o){m(t,e,o);for(let t=0;t<c.length;t+=1)c[t].m(e,null);p(e,n),s&&s.m(e,null),r=!0},p(t,[r]){if(15&r){let o;for(i=Object.entries(t[0]),o=0;o<i.length;o+=1){const a=$e(t,i,o);c[o]?(c[o].p(a,r),tt(c[o],1)):(c[o]=we(a),c[o].c(),tt(c[o],1),c[o].m(e,n))}for(Q(),o=i.length;o<c.length;o+=1)a(o);X()}1&r&&(o=0==Object.keys(t[0]).length),o?s?tt(s,1):(s=xe(),s.c(),tt(s,1),s.m(e,null)):s&&(Q(),et(s,1,1,()=>{s=null}),X())},i(t){if(!r){for(let t=0;t<i.length;t+=1)tt(c[t]);tt(s),r=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)et(c[t]);et(s),r=!1},d(t){t&&g(e),v(c,t),s&&s.d()}}}function Le(t,e,n){let r,o,i,c;s(t,Ot,t=>n(1,r=t)),s(t,jt,t=>n(4,o=t)),s(t,Ct,t=>n(5,i=t)),s(t,kt,t=>n(2,c=t));let a=[],u=(t,[e,n])=>{let r=e[0];return r in t?t[r].push({name:e,item:n}):t[r]=[{name:e,item:n}],t};return t.$$.update=()=>{48&t.$$.dirty&&n(0,a=Object.entries(o).filter(([t,e])=>{return n=i,t.toUpperCase().includes((n||"").toUpperCase());var n}).reduce(u,{}))},[a,r,c,t=>{t.detail==r?Ot.set(null):Ot.set(t.detail)}]}class je extends lt{constructor(t){super(),ut(this,t,Le,_e,c,{})}}function Ee(e){let n;return{c(){n=y("footer"),n.innerHTML='<ul class="svelte-xv4q4t"><li>Source: Office for National Statistics licensed under the Open Government Licence v.3.0</li> \n\t\t<li>Website <a href="https://github.com/Temetra/COVID-19-Interactive-Map-England">available on GitHub</a>, licensed under MIT</li></ul>',x(n,"class","svelte-xv4q4t")},m(t,e){m(t,n,e)},p:t,i:t,o:t,d(t){t&&g(n)}}}class Oe extends lt{constructor(t){super(),ut(this,t,null,Ee,c,{})}}function Ce(e){let n,r,o,i,c,a,s;const u=new Mt({}),l=new Kt({}),f=new ie({}),d=new pe({}),h=new je({}),v=new Oe({});return{c(){n=y("div"),it(u.$$.fragment),r=b(),it(l.$$.fragment),o=b(),it(f.$$.fragment),i=b(),it(d.$$.fragment),c=b(),it(h.$$.fragment),a=b(),it(v.$$.fragment),x(n,"class","container svelte-dg7yne")},m(t,e){m(t,n,e),ct(u,n,null),p(n,r),ct(l,n,null),p(n,o),ct(f,n,null),p(n,i),ct(d,n,null),p(n,c),ct(h,n,null),p(n,a),ct(v,n,null),s=!0},p:t,i(t){s||(tt(u.$$.fragment,t),tt(l.$$.fragment,t),tt(f.$$.fragment,t),tt(d.$$.fragment,t),tt(h.$$.fragment,t),tt(v.$$.fragment,t),s=!0)},o(t){et(u.$$.fragment,t),et(l.$$.fragment,t),et(f.$$.fragment,t),et(d.$$.fragment,t),et(h.$$.fragment,t),et(v.$$.fragment,t),s=!1},d(t){t&&g(n),at(u),at(l),at(f),at(d),at(h),at(v)}}}function ke(t){return M(It),[]}var Se=new class extends lt{constructor(t){super(),ut(this,t,ke,Ce,c,{})}}({target:document.body});return window.app=Se,Se}();
