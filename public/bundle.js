var app=function(){"use strict";function t(){}function n(t){return t()}function e(){return Object.create(null)}function r(t){t.forEach(n)}function o(t){return"function"==typeof t}function c(t,n){return t!=t?n==n:t!==n||t&&"object"==typeof t||"function"==typeof t}function l(n,...e){if(null==n)return t;const r=n.subscribe(...e);return r.unsubscribe?()=>r.unsubscribe():r}function a(t,n,e){t.$$.on_destroy.push(l(n,e))}function s(t,n){t.appendChild(n)}function i(t,n,e){t.insertBefore(n,e||null)}function u(t){t.parentNode.removeChild(t)}function f(t,n){for(let e=0;e<t.length;e+=1)t[e]&&t[e].d(n)}function d(t){return document.createElement(t)}function p(t){return document.createTextNode(t)}function h(){return p(" ")}function g(){return p("")}function m(t,n,e,r){return t.addEventListener(n,e,r),()=>t.removeEventListener(n,e,r)}function v(t,n,e){null==e?t.removeAttribute(n):t.getAttribute(n)!==e&&t.setAttribute(n,e)}function y(t,n){n=""+n,t.data!==n&&(t.data=n)}function $(t,n){(null!=n||t.value)&&(t.value=n)}function b(t,n,e){t.classList[e?"add":"remove"](n)}let w;function x(t){w=t}function C(t){(function(){if(!w)throw new Error("Function called outside component initialization");return w})().$$.on_mount.push(t)}const _=[],O=[],j=[],A=[],T=Promise.resolve();let k=!1;function S(t){j.push(t)}let E=!1;const M=new Set;function H(){if(!E){E=!0;do{for(let t=0;t<_.length;t+=1){const n=_[t];x(n),I(n.$$)}for(_.length=0;O.length;)O.pop()();for(let t=0;t<j.length;t+=1){const n=j[t];M.has(n)||(M.add(n),n())}j.length=0}while(_.length);for(;A.length;)A.pop()();k=!1,E=!1,M.clear()}}function I(t){if(null!==t.fragment){t.update(),r(t.before_update);const n=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,n),t.after_update.forEach(S)}}const N=new Set;function U(t,n){t&&t.i&&(N.delete(t),t.i(n))}function z(t,n,e,r){if(t&&t.o){if(N.has(t))return;N.add(t),(void 0).c.push(()=>{N.delete(t),r&&(e&&t.d(1),r())}),t.o(n)}}function D(t){t&&t.c()}function P(t,e,c){const{fragment:l,on_mount:a,on_destroy:s,after_update:i}=t.$$;l&&l.m(e,c),S(()=>{const e=a.map(n).filter(o);s?s.push(...e):r(e),t.$$.on_mount=[]}),i.forEach(S)}function V(t,n){const e=t.$$;null!==e.fragment&&(r(e.on_destroy),e.fragment&&e.fragment.d(n),e.on_destroy=e.fragment=null,e.ctx=[])}function B(t,n){-1===t.$$.dirty[0]&&(_.push(t),k||(k=!0,T.then(H)),t.$$.dirty.fill(0)),t.$$.dirty[n/31|0]|=1<<n%31}function q(n,o,c,l,a,s,i=[-1]){const u=w;x(n);const f=o.props||{},d=n.$$={fragment:null,ctx:null,props:s,update:t,not_equal:a,bound:e(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:e(),dirty:i};let p=!1;d.ctx=c?c(n,f,(t,e,...r)=>{const o=r.length?r[0]:e;return d.ctx&&a(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),p&&B(n,t)),e}):[],d.update(),p=!0,r(d.before_update),d.fragment=!!l&&l(d.ctx),o.target&&(o.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(o.target)):d.fragment&&d.fragment.c(),o.intro&&U(n.$$.fragment),P(n,o.target,o.anchor),H()),x(u)}class F{$destroy(){V(this,1),this.$destroy=t}$on(t,n){const e=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return e.push(n),()=>{const t=e.indexOf(n);-1!==t&&e.splice(t,1)}}$set(){}}function G(n){let e;return{c(){e=d("header"),e.innerHTML="<h1>Interactive map of Coronavirus (COVID-19) cases in England</h1>",v(e,"class","svelte-1t0ytpt")},m(t,n){i(t,e,n)},p:t,i:t,o:t,d(t){t&&u(e)}}}class W extends F{constructor(t){super(),q(this,t,null,G,c,{})}}function Z(t){return function(t){if(Array.isArray(t)){for(var n=0,e=new Array(t.length);n<t.length;n++)e[n]=t[n];return e}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function J(t){return fetch(t).then((function(t){return t.json()})).catch((function(t){return console.error(t)}))}function Y(t){switch(t){case"Cornwall":case"Isles of Scilly":return"Cornwall and Isles of Scilly";case"Hackney":case"City of London":return"Hackney and City of London"}return t}function K(t,n,e){var r=t[n];return r?r[e]:null}var Q=["rgba(86, 228, 86, ".concat("0.33",")"),"rgba(255, 255, 0, ".concat("0.33",")"),"rgba(255, 191, 0, ".concat("0.33",")"),"rgba(255, 127, 0, ".concat("0.33",")"),"rgba(255, 63, 0, ".concat("0.33",")"),"rgba(255, 0, 0, ".concat("0.33",")")],R=Array(Q.length);function X(t){return Array.from(R,(function(n,e){return Math.floor(t/Q.length*e)}))}function tt(t,n){if(null==t)return"rgba(0, 0, 0, 0.0625)";for(var e=X(n),r=e.length;r>=0;r--)if(t>=e[r])return Q[r]}function nt(t,n){if(null==t||null==n)return null;var e=L.control({position:"topright"});return e.onAdd=function(){var t=L.DomUtil.create("div","info legend");t.innerHTML+='<div class="legend">';var e=!0,r=!1,o=void 0;try{for(var c,l=function(t){if(0==t)return[];var n=["Unknown"].concat(Z(X(t).map((function(t){return 1==t?"1 case":"".concat(t," cases")})))),e=["rgba(0, 0, 0, 0.0625)"].concat(Q);return n.map((function(t,n){return{label:t,color:e[n]}}))}(n)[Symbol.iterator]();!(e=(c=l.next()).done);e=!0){var a=c.value;t.innerHTML+='<div class="keyitem">\n\t\t\t\t<div class="color" style="background-color:'.concat(a.color,';"></div>\n\t\t\t\t<div class="label">').concat(a.label,"</div>\n\t\t\t</div>")}}catch(t){r=!0,o=t}finally{try{e||null==l.return||l.return()}finally{if(r)throw o}}return t.innerHTML+="</div>",t},e.addTo(t),e}const et=[];function rt(n,e=t){let r;const o=[];function l(t){if(c(n,t)&&(n=t,r)){const t=!et.length;for(let t=0;t<o.length;t+=1){const e=o[t];e[1](),et.push(e,n)}if(t){for(let t=0;t<et.length;t+=2)et[t][0](et[t+1]);et.length=0}}}return{set:l,update:function(t){l(t(n))},subscribe:function(c,a=t){const s=[c,a];return o.push(s),1===o.length&&(r=e(l)||t),c(n),()=>{const t=o.indexOf(s);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function ot(n,e,c){const a=!Array.isArray(n),s=a?[n]:n,i=e.length<2;return{subscribe:rt(c,n=>{let c=!1;const u=[];let f=0,d=t;const p=()=>{if(f)return;d();const r=e(a?u[0]:u,n);i?n(r):d=o(r)?r:t},h=s.map((t,n)=>l(t,t=>{u[n]=t,f&=~(1<<n),c&&p()},()=>{f|=1<<n}));return c=!0,p(),function(){r(h),d()}}).subscribe}}var ct=rt(),lt=rt(),at=rt(),st=rt(),it=rt(),ut=ot(lt,(function(t){return function(t){var n=0;if(t)for(var e=Object.keys(t),r=0;r<e.length;r++){var o=e[r];if("Awaiting confirmation"!=o)for(var c=Object.keys(t[o]),l=0;l<c.length;l++){var a=c[l],s=t[o][a];n<s&&(n=s)}}return n}(t)})),ft=ot(lt,(function(t){return function(t){if(t){var n=Object.keys(t)[0];return Object.keys(t[n])}return[]}(t)}));function dt(n){let e;return{c(){e=d("section"),e.innerHTML='<div id="leaflet_ele" class="svelte-191riyy"></div>',v(e,"class","svelte-191riyy")},m(t,n){i(t,e,n)},p:t,i:t,o:t,d(t){t&&u(e)}}}ft.subscribe((function(t){t&&t.length>0&&at.set(t[t.length-1])}));function pt(t,n,e){let r,o,c,l,s;a(t,ut,t=>e(4,r=t)),a(t,ct,t=>e(5,o=t)),a(t,lt,t=>e(6,c=t)),a(t,at,t=>e(7,l=t)),a(t,st,t=>e(8,s=t));const i={lat:52.914639,lon:-1.47189};var u,f,d;return C(async()=>{e(0,u=L.map("leaflet_ele",{center:i,zoom:7})),L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}).addTo(u)}),t.$$.update=()=>{if(19&t.$$.dirty&&(f&&f.remove(),e(1,f=nt(u,r))),249&t.$$.dirty&&(d&&d.remove(),e(3,d=function(t,n,e,r,o){if(null==t||null==n||null==e||null==r||null==o)return null;var c=L.geoJSON(n,{style:function(t){var n=Y(t.properties.ctyua19nm);return{color:tt(K(e,n,o),r),weight:0,fillOpacity:1}},onEachFeature:function(t,n){var r=Y(t.properties.ctyua19nm),c=K(e,r,o);null==c?n.bindPopup("".concat(r,"<br/>No data")):n.bindPopup("".concat(r,"<br/>").concat(c," case").concat(1==c?"":"s"))}});return c.addTo(t),c}(u,o,c,r,l))),265&t.$$.dirty&&null!=s){let t=function(t){switch(t){case"Cornwall and Isles of Scilly":return"Cornwall";case"Hackney and City of London":return"City of London";case"Awaiting confirmation":return""}return t}(s);if(t.length>0)for(let n of Object.values(d._layers))t==n.feature.properties.ctyua19nm&&(n.openPopup(),u.setView(n.getCenter(),9,{animate:!0}),window.scrollTo(0,0));else u.closePopup(),u.setView(i,7,{animate:!0}),window.scrollTo(0,0)}},[]}class ht extends F{constructor(t){super(),q(this,t,pt,dt,c,{})}}function gt(n){let e,r,o,c,l,a,f;return{c(){e=d("section"),r=d("h2"),r.textContent="Choose a date",o=h(),c=d("input"),v(c,"type","date"),c.required=!0,c.value=n[0],v(c,"min",l=n[1][0]),v(c,"max",a=n[1][n[1].length-1]),v(c,"class","svelte-1hfx75l")},m(t,l){i(t,e,l),s(e,r),s(e,o),s(e,c),f=m(c,"change",n[2])},p(t,[n]){1&n&&(c.value=t[0]),2&n&&l!==(l=t[1][0])&&v(c,"min",l),2&n&&a!==(a=t[1][t[1].length-1])&&v(c,"max",a)},i:t,o:t,d(t){t&&u(e),f()}}}function mt(t,n,e){let r,o;a(t,at,t=>e(0,r=t)),a(t,ft,t=>e(1,o=t));return[r,o,t=>{st.set(""),at.set(t.target.value)}]}class vt extends F{constructor(t){super(),q(this,t,mt,gt,c,{})}}function yt(n){let e,o,c,l,a,f,p,g,y;return{c(){e=d("section"),o=d("h2"),o.textContent="Search for a region",c=h(),l=d("div"),a=d("input"),f=h(),p=d("div"),g=d("button"),g.textContent="Ã—",v(a,"class","svelte-jc2czo"),v(g,"class","svelte-jc2czo"),v(p,"class","svelte-jc2czo"),v(l,"class","inputgroup svelte-jc2czo")},m(t,r){i(t,e,r),s(e,o),s(e,c),s(e,l),s(l,a),$(a,n[0]),s(l,f),s(l,p),s(p,g),y=[m(a,"input",n[2]),m(g,"click",n[1])]},p(t,[n]){1&n&&a.value!==t[0]&&$(a,t[0])},i:t,o:t,d(t){t&&u(e),r(y)}}}function $t(t,n,e){let r;a(t,it,t=>e(0,r=t));return[r,()=>it.set(""),function(){r=this.value,it.set(r)}]}class bt extends F{constructor(t){super(),q(this,t,$t,yt,c,{})}}function wt(n){let e,r,o;const c=new vt({}),l=new bt({});return{c(){e=d("section"),D(c.$$.fragment),r=h(),D(l.$$.fragment),v(e,"class","svelte-svd21x")},m(t,n){i(t,e,n),P(c,e,null),s(e,r),P(l,e,null),o=!0},p:t,i(t){o||(U(c.$$.fragment,t),U(l.$$.fragment,t),o=!0)},o(t){z(c.$$.fragment,t),z(l.$$.fragment,t),o=!1},d(t){t&&u(e),V(c),V(l)}}}class xt extends F{constructor(t){super(),q(this,t,null,wt,c,{})}}function Ct(t,n,e){const r=t.slice();return r[12]=n[e][0],r[13]=n[e][1],r}function _t(t,n,e){const r=t.slice();return r[8]=n[e][0],r[9]=n[e][1],r}function Lt(t,n,e){const r=t.slice();return r[12]=n[e],r}function Ot(t){let n,e,r,o=t[12]+"";return{c(){n=d("th"),e=p("Cases on "),r=p(o),v(n,"class","svelte-1av9ypa"),b(n,"show",t[12]==t[2])},m(t,o){i(t,n,o),s(n,e),s(n,r)},p(t,e){2&e&&o!==(o=t[12]+"")&&y(r,o),6&e&&b(n,"show",t[12]==t[2])},d(t){t&&u(n)}}}function jt(t){let n,e=Object.entries(t[3]),r=[];for(let n=0;n<e.length;n+=1)r[n]=kt(_t(t,e,n));return{c(){for(let t=0;t<r.length;t+=1)r[t].c();n=g()},m(t,e){for(let n=0;n<r.length;n+=1)r[n].m(t,e);i(t,n,e)},p(t,o){if(29&o){let c;for(e=Object.entries(t[3]),c=0;c<e.length;c+=1){const l=_t(t,e,c);r[c]?r[c].p(l,o):(r[c]=kt(l),r[c].c(),r[c].m(n.parentNode,n))}for(;c<r.length;c+=1)r[c].d(1);r.length=e.length}},d(t){f(r,t),t&&u(n)}}}function At(t){let n,e,r,o,c,l,a=t[8]+"",g=Object.entries(t[9]),$=[];for(let n=0;n<g.length;n+=1)$[n]=Tt(Ct(t,g,n));function b(...n){return t[7](t[8],...n)}return{c(){n=d("tr"),e=d("td"),r=p(a),o=h();for(let t=0;t<$.length;t+=1)$[t].c();c=h(),v(e,"class","show svelte-1av9ypa"),v(n,"class","svelte-1av9ypa")},m(t,a){i(t,n,a),s(n,e),s(e,r),s(n,o);for(let t=0;t<$.length;t+=1)$[t].m(n,null);s(n,c),l=m(n,"click",b)},p(e,o){if(t=e,8&o&&a!==(a=t[8]+"")&&y(r,a),12&o){let e;for(g=Object.entries(t[9]),e=0;e<g.length;e+=1){const r=Ct(t,g,e);$[e]?$[e].p(r,o):($[e]=Tt(r),$[e].c(),$[e].m(n,c))}for(;e<$.length;e+=1)$[e].d(1);$.length=g.length}},d(t){t&&u(n),f($,t),l()}}}function Tt(t){let n,e,r=t[13]+"";return{c(){n=d("td"),e=p(r),v(n,"class","svelte-1av9ypa"),b(n,"show",t[12]==t[2])},m(t,r){i(t,n,r),s(n,e)},p(t,o){8&o&&r!==(r=t[13]+"")&&y(e,r),12&o&&b(n,"show",t[12]==t[2])},d(t){t&&u(n)}}}function kt(t){let n,e=t[0](t[8]),r=e&&At(t);return{c(){r&&r.c(),n=g()},m(t,e){r&&r.m(t,e),i(t,n,e)},p(t,o){9&o&&(e=t[0](t[8])),e?r?r.p(t,o):(r=At(t),r.c(),r.m(n.parentNode,n)):r&&(r.d(1),r=null)},d(t){r&&r.d(t),t&&u(n)}}}function St(n){let e,r,o,c,l,a,p,g,m,y,$,b=n[1],w=[];for(let t=0;t<b.length;t+=1)w[t]=Ot(Lt(n,b,t));let x=n[3]&&jt(n);return{c(){e=d("section"),r=d("h2"),r.textContent="Confirmed cases by Upper Tier Local Authority",o=h(),c=d("div"),l=d("table"),a=d("thead"),p=d("tr"),g=d("th"),g.textContent="UTLA",m=h();for(let t=0;t<w.length;t+=1)w[t].c();y=h(),$=d("tbody"),x&&x.c(),v(g,"class","show svelte-1av9ypa"),v(p,"class","svelte-1av9ypa"),v(a,"class","svelte-1av9ypa"),v(l,"class","svelte-1av9ypa"),v(c,"class","tablecontainer svelte-1av9ypa"),v(e,"class","svelte-1av9ypa")},m(t,n){i(t,e,n),s(e,r),s(e,o),s(e,c),s(c,l),s(l,a),s(a,p),s(p,g),s(p,m);for(let t=0;t<w.length;t+=1)w[t].m(p,null);s(l,y),s(l,$),x&&x.m($,null)},p(t,[n]){if(6&n){let e;for(b=t[1],e=0;e<b.length;e+=1){const r=Lt(t,b,e);w[e]?w[e].p(r,n):(w[e]=Ot(r),w[e].c(),w[e].m(p,null))}for(;e<w.length;e+=1)w[e].d(1);w.length=b.length}t[3]?x?x.p(t,n):(x=jt(t),x.c(),x.m($,null)):x&&(x.d(1),x=null)},i:t,o:t,d(t){t&&u(e),f(w,t),x&&x.d()}}}function Et(t,n,e){let r,o,c,l,s;a(t,st,t=>e(5,r=t)),a(t,it,t=>e(6,o=t)),a(t,ft,t=>e(1,c=t)),a(t,at,t=>e(2,l=t)),a(t,lt,t=>e(3,s=t));var i=t=>{t==r?st.set(""):st.set(t)};let u;return t.$$.update=()=>{64&t.$$.dirty&&e(0,u=t=>null==o||o.length<1||t.toUpperCase().includes(o.toUpperCase()))},[u,c,l,s,i,r,o,t=>i(t)]}class Mt extends F{constructor(t){super(),q(this,t,Et,St,c,{})}}function Ht(n){let e;return{c(){e=d("footer"),e.innerHTML='<ul class="svelte-2d2g1l"><li>Source: Office for National Statistics licensed under the Open Government Licence v.3.0</li> \n\t\t<li>Website <a href="https://github.com/Temetra/COVID-19-Interactive-Map-England">available on GitHub</a>, licensed under MIT</li></ul>',v(e,"class","svelte-2d2g1l")},m(t,n){i(t,e,n)},p:t,i:t,o:t,d(t){t&&u(e)}}}class It extends F{constructor(t){super(),q(this,t,null,Ht,c,{})}}function Nt(n){let e,r,o,c,l,a;const f=new W({}),p=new ht({}),g=new xt({}),m=new Mt({}),y=new It({});return{c(){e=d("div"),D(f.$$.fragment),r=h(),D(p.$$.fragment),o=h(),D(g.$$.fragment),c=h(),D(m.$$.fragment),l=h(),D(y.$$.fragment),v(e,"class","container svelte-14yspno")},m(t,n){i(t,e,n),P(f,e,null),s(e,r),P(p,e,null),s(e,o),P(g,e,null),s(e,c),P(m,e,null),s(e,l),P(y,e,null),a=!0},p:t,i(t){a||(U(f.$$.fragment,t),U(p.$$.fragment,t),U(g.$$.fragment,t),U(m.$$.fragment,t),U(y.$$.fragment,t),a=!0)},o(t){z(f.$$.fragment,t),z(p.$$.fragment,t),z(g.$$.fragment,t),z(m.$$.fragment,t),z(y.$$.fragment,t),a=!1},d(t){t&&u(e),V(f),V(p),V(g),V(m),V(y)}}}function Ut(t){return C(async()=>{J("./data/Counties_and_Unitary_Authorities_April_2019_Boundaries_EW_BUC.json").then(t=>(ct.set(t),J("./data/Coronavirus-COVID-19-number-of-cases-in-England.json"))).then(t=>{lt.set(t)})}),[]}var zt=new class extends F{constructor(t){super(),q(this,t,Ut,Nt,c,{})}}({target:document.body});return window.app=zt,zt}();
