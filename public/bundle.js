var app=function(){"use strict";function t(){}const e=t=>t;function n(t){return t()}function r(){return Object.create(null)}function o(t){t.forEach(n)}function s(t){return"function"==typeof t}function c(t,e){return t!=t?e==e:t!==e||t&&"object"==typeof t||"function"==typeof t}function i(e,...n){if(null==e)return t;const r=e.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function u(t,e,n){t.$$.on_destroy.push(i(e,n))}const a="undefined"!=typeof window;let l=a?()=>window.performance.now():()=>Date.now(),f=a?t=>requestAnimationFrame(t):t;const d=new Set;function m(t){d.forEach(e=>{e.c(t)||(d.delete(e),e.f())}),0!==d.size&&f(m)}function p(t,e){t.appendChild(e)}function g(t,e,n){t.insertBefore(e,n||null)}function h(t){t.parentNode.removeChild(t)}function $(t,e){for(let n=0;n<t.length;n+=1)t[n]&&t[n].d(e)}function v(t){return document.createElement(t)}function y(t){return document.createTextNode(t)}function b(){return y(" ")}function w(t,e,n,r){return t.addEventListener(e,n,r),()=>t.removeEventListener(e,n,r)}function x(t,e,n){null==n?t.removeAttribute(e):t.getAttribute(e)!==n&&t.setAttribute(e,n)}function C(t,e){e=""+e,t.data!==e&&(t.data=e)}function _(t,e){(null!=e||t.value)&&(t.value=e)}function j(t,e,n){t.classList[n?"add":"remove"](e)}function O(t,e){const n=document.createEvent("CustomEvent");return n.initCustomEvent(t,!1,!1,e),n}let k,A,S=0,E={};function I(t,e,n,r,o,s,c,i=0){const u=16.666/r;let a="{\n";for(let t=0;t<=1;t+=u){const r=e+(n-e)*s(t);a+=100*t+`%{${c(r,1-r)}}\n`}const l=a+`100% {${c(n,1-n)}}\n}`,f=`__svelte_${function(t){let e=5381,n=t.length;for(;n--;)e=(e<<5)-e^t.charCodeAt(n);return e>>>0}(l)}_${i}`;if(!E[f]){if(!k){const t=v("style");document.head.appendChild(t),k=t.sheet}E[f]=!0,k.insertRule(`@keyframes ${f} ${l}`,k.cssRules.length)}const d=t.style.animation||"";return t.style.animation=`${d?`${d}, `:""}${f} ${r}ms linear ${o}ms 1 both`,S+=1,f}function M(t,e){t.style.animation=(t.style.animation||"").split(", ").filter(e?t=>t.indexOf(e)<0:t=>-1===t.indexOf("__svelte")).join(", "),e&&!--S&&f(()=>{if(S)return;let t=k.cssRules.length;for(;t--;)k.deleteRule(t);E={}})}function T(t){A=t}function P(){if(!A)throw new Error("Function called outside component initialization");return A}function R(t){P().$$.on_mount.push(t)}const q=[],N=[],B=[],D=[],z=Promise.resolve();let U=!1;function H(t){B.push(t)}let V=!1;const F=new Set;function G(){if(!V){V=!0;do{for(let t=0;t<q.length;t+=1){const e=q[t];T(e),W(e.$$)}for(q.length=0;N.length;)N.pop()();for(let t=0;t<B.length;t+=1){const e=B[t];F.has(e)||(F.add(e),e())}B.length=0}while(q.length);for(;D.length;)D.pop()();U=!1,V=!1,F.clear()}}function W(t){if(null!==t.fragment){t.update(),o(t.before_update);const e=t.dirty;t.dirty=[-1],t.fragment&&t.fragment.p(t.ctx,e),t.after_update.forEach(H)}}let Z;function J(t,e,n){t.dispatchEvent(O(`${e?"intro":"outro"}${n}`))}const Y=new Set;let K;function Q(){K={r:0,c:[],p:K}}function X(){K.r||o(K.c),K=K.p}function tt(t,e){t&&t.i&&(Y.delete(t),t.i(e))}function et(t,e,n,r){if(t&&t.o){if(Y.has(t))return;Y.add(t),K.c.push(()=>{Y.delete(t),r&&(n&&t.d(1),r())}),t.o(e)}}const nt={duration:0};function rt(n,r,c,i){let u=r(n,c),a=i?0:1,p=null,g=null,h=null;function $(){h&&M(n,h)}function v(t,e){const n=t.b-a;return e*=Math.abs(n),{a:a,b:t.b,d:n,duration:e,start:t.start,end:t.start+e,group:t.group}}function y(r){const{delay:s=0,duration:c=300,easing:i=e,tick:y=t,css:b}=u||nt,w={start:l()+s,b:r};r||(w.group=K,K.r+=1),p?g=w:(b&&($(),h=I(n,a,r,c,s,i,b)),r&&y(0,1),p=v(w,c),H(()=>J(n,r,"start")),function(t){let e;0===d.size&&f(m),new Promise(n=>{d.add(e={c:t,f:n})})}(t=>{if(g&&t>g.start&&(p=v(g,c),g=null,J(n,p.b,"start"),b&&($(),h=I(n,a,p.b,p.duration,0,i,u.css))),p)if(t>=p.end)y(a=p.b,1-a),J(n,p.b,"end"),g||(p.b?$():--p.group.r||o(p.group.c)),p=null;else if(t>=p.start){const e=t-p.start;a=p.a+p.d*i(e/p.duration),y(a,1-a)}return!(!p&&!g)}))}return{run(t){s(u)?(Z||(Z=Promise.resolve(),Z.then(()=>{Z=null})),Z).then(()=>{u=u(),y(t)}):y(t)},end(){$(),p=g=null}}}function ot(t,e){et(t,1,1,()=>{e.delete(t.key)})}function st(t){t&&t.c()}function ct(t,e,r){const{fragment:c,on_mount:i,on_destroy:u,after_update:a}=t.$$;c&&c.m(e,r),H(()=>{const e=i.map(n).filter(s);u?u.push(...e):o(e),t.$$.on_mount=[]}),a.forEach(H)}function it(t,e){const n=t.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(e),n.on_destroy=n.fragment=null,n.ctx=[])}function ut(t,e){-1===t.$$.dirty[0]&&(q.push(t),U||(U=!0,z.then(G)),t.$$.dirty.fill(0)),t.$$.dirty[e/31|0]|=1<<e%31}function at(e,n,s,c,i,u,a=[-1]){const l=A;T(e);const f=n.props||{},d=e.$$={fragment:null,ctx:null,props:u,update:t,not_equal:i,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(l?l.$$.context:[]),callbacks:r(),dirty:a};let m=!1;d.ctx=s?s(e,f,(t,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&i(d.ctx[t],d.ctx[t]=o)&&(d.bound[t]&&d.bound[t](o),m&&ut(e,t)),n}):[],d.update(),m=!0,o(d.before_update),d.fragment=!!c&&c(d.ctx),n.target&&(n.hydrate?d.fragment&&d.fragment.l(function(t){return Array.from(t.childNodes)}(n.target)):d.fragment&&d.fragment.c(),n.intro&&tt(e.$$.fragment),ct(e,n.target,n.anchor),G()),T(l)}class lt{$destroy(){it(this,1),this.$destroy=t}$on(t,e){const n=this.$$.callbacks[t]||(this.$$.callbacks[t]=[]);return n.push(e),()=>{const t=n.indexOf(e);-1!==t&&n.splice(t,1)}}$set(){}}function ft(t,e,n,r,o,s,c){try{var i=t[s](c),u=i.value}catch(t){return void n(t)}i.done?e(u):Promise.resolve(u).then(r,o)}function dt(t){return function(){var e=this,n=arguments;return new Promise((function(r,o){var s=t.apply(e,n);function c(t){ft(s,r,o,c,i,"next",t)}function i(t){ft(s,r,o,c,i,"throw",t)}c(void 0)}))}}function mt(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){if(!(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t)))return;var n=[],r=!0,o=!1,s=void 0;try{for(var c,i=t[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!e||n.length!==e);r=!0);}catch(t){o=!0,s=t}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function pt(t){return function(t){if(Array.isArray(t)){for(var e=0,n=new Array(t.length);e<t.length;e++)n[e]=t[e];return n}}(t)||function(t){if(Symbol.iterator in Object(t)||"[object Arguments]"===Object.prototype.toString.call(t))return Array.from(t)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}const gt=[];function ht(e,n=t){let r;const o=[];function s(t){if(c(e,t)&&(e=t,r)){const t=!gt.length;for(let t=0;t<o.length;t+=1){const n=o[t];n[1](),gt.push(n,e)}if(t){for(let t=0;t<gt.length;t+=2)gt[t][0](gt[t+1]);gt.length=0}}}return{set:s,update:function(t){s(t(e))},subscribe:function(c,i=t){const u=[c,i];return o.push(u),1===o.length&&(r=n(s)||t),c(e),()=>{const t=o.indexOf(u);-1!==t&&o.splice(t,1),0===o.length&&(r(),r=null)}}}}function $t(e,n,r){const c=!Array.isArray(e),u=c?[e]:e,a=n.length<2;return{subscribe:ht(r,e=>{let r=!1;const l=[];let f=0,d=t;const m=()=>{if(f)return;d();const r=n(c?l[0]:l,e);a?e(r):d=s(r)?r:t},p=u.map((t,e)=>i(t,t=>{l[e]=t,f&=~(1<<e),r&&m()},()=>{f|=1<<e}));return r=!0,m(),function(){o(p),d()}}).subscribe}}var vt=ht(),yt=ht(),bt=ht([]),wt=ht({}),xt=ht({}),Ct=ht(),_t=ht(),jt=ht(),Ot=$t([bt,Ct],(function(t){var e=mt(t,2),n=e[0],r=e[1];return n.indexOf(r)})),kt=$t(xt,(function(t){return function(t){return Object.values(t).reduce((function(t,e){return e.Cases.reduce((function(t,e){return e>t?e:t}),t)}),0)}(t)})),At=$t(xt,(function(t){return function(t){return Object.entries(t).reduce((function(t,e){var n=mt(e,2),r=n[0],o=n[1],s=!0,c=!1,i=void 0;try{for(var u,a=o.Codes[Symbol.iterator]();!(s=(u=a.next()).done);s=!0){t[u.value]={Name:r,Cases:o.Cases}}}catch(t){c=!0,i=t}finally{try{s||null==a.return||a.return()}finally{if(c)throw i}}return t}),{})}(t)})),St=$t([vt,At,kt,Ot],(function(t){return t}));function Et(){return It.apply(this,arguments)}function It(){return(It=dt(regeneratorRuntime.mark((function t(){var e,n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e=fetch("./data/Counties_and_Unitary_Authorities_April_2019_Boundaries_EW_BUC.json").then((function(t){return t.json()})).then((function(t){return vt.set(t)})).then((function(){return console.log("Boundaries loaded")})),n=fetch("./data/Population-mid-2018.json").then((function(t){return t.json()})).then((function(t){return yt.set(t)})).then((function(){return console.log("Population loaded")})),r=fetch("./data/Coronavirus-COVID-19-number-of-cases-in-England.json").then((function(t){return t.json()})).then((function(t){bt.set(t.Labels),wt.set(t.Summary),xt.set(t.CasesByRegion)})).then((function(){return console.log("Cases loaded")})),t.abrupt("return",Promise.all([e,n,r]).catch((function(t){return console.error(t)})));case 4:case"end":return t.stop()}}),t)})))).apply(this,arguments)}function Lt(e){let n;return{c(){n=v("header"),n.innerHTML='<h1 class="svelte-r1hr4i">Interactive map of Coronavirus (COVID-19) cases (cumulative, lab-confirmed) in England</h1>',x(n,"class","svelte-r1hr4i")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}bt.subscribe((function(t){t&&t.length>0&&Ct.set(t[t.length-1])}));class Mt extends lt{constructor(t){super(),at(this,t,null,Lt,c,{})}}var Tt,Pt,Rt,qt={lat:52.914639,lon:-1.47189},Nt=["region-unknown","region-zero","region-one","region-two","region-three","region-four","region-five"];function Bt(t){var e=t.feature.properties.mergedAuthority||t.feature.properties.ctyua19nm,n=t.feature.properties.casesCount;return null==n?"".concat(e,"<br/>No data"):"".concat(e,"<br/>").concat(n," case").concat(1==n?"":"s")}function Dt(t,e){var n=Bt(e);e.bindPopup(n,{className:"region-popup"}).addTo(Tt),e.openPopup(t)}function zt(t){var e=Array(Nt.length-2);return[0].concat(pt(Array.from(e,(function(e,n){return Math.ceil(t/(Nt.length-2)*n+1)}))))}function Ut(e){let n,r;return{c(){n=v("section"),r=v("div"),x(r,"class","svelte-n9bg7i"),x(n,"class","svelte-n9bg7i")},m(t,o){g(t,n,o),p(n,r),e[1](r)},p:t,i:t,o:t,d(t){t&&h(n),e[1](null)}}}function Ht(t,e,n){let r;return R(()=>function(t){null==Tt&&((Tt=L.map(t,{center:qt,zoom:7})).getPane("overlayPane").classList.add("blend-overlay-pane"),L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}))}(r)),[r,function(t){N[t?"unshift":"push"](()=>{n(0,r=t)})}]}vt.subscribe((function(t){return function(t){if(null==Tt||null==t)return;Rt&&Rt.remove();(Rt=L.geoJSON(t,{style:function(t){return{fillOpacity:.5,weight:0}},onEachFeature:function(t,e){e.on({click:function(t){return Dt(t.latlng,t.sourceTarget)}})}})).addTo(Tt)}(t)})),kt.subscribe((function(t){return function(t){if(null==Tt||null==t)return;Pt&&Pt.remove();(Pt=L.control({position:"topright"})).onAdd=function(){var e=L.DomUtil.create("div","info legend"),n=!0,r=!1,o=void 0;try{for(var s,c=function(t){if(0==t)return[];var e=zt(t),n=e.map((function(t){return t-1}));return n.shift(),n.push(t),["Unknown"].concat(pt(e.map((function(t,e){return 0==e?"0 cases":"".concat(t,"-").concat(n[e]," cases")})))).map((function(t,e){return{label:t,color:Nt[e]}}))}(t)[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var i=s.value;e.innerHTML+='<div class="keyitem">\n\t\t\t\t<div class="color '.concat(i.color,'"><div></div></div>\n\t\t\t\t<div class="label">').concat(i.label,"</div>\n\t\t\t</div>")}}catch(t){r=!0,o=t}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return e},Pt.addTo(Tt)}(t)})),St.subscribe((function(t){var e=mt(t,4);e[0];!function(t,e,n){if(null==Rt||e<=0||-1==n)return;for(var r=zt(e),o=function(){var e=c[s],o=t[e.feature.properties.ctyua19cd],a=o?o.Cases[n]:null;if(i=r.findIndex((function(t){return null==a||a<t})),u=i>-1?Nt[i]:Nt[Nt.length-1],e._path.setAttribute("fill-opacity",1),e._path.setAttribute("class","leaflet-interactive "+u),e.feature.properties.casesCount=a,o&&e.feature.properties.ctyua19nm!=o.Name&&(e.feature.properties.mergedAuthority=o.Name),e.isPopupOpen()){var l=e.getPopup(),f=Bt(e);l.setContent(f)}},s=0,c=Object.values(Rt._layers);s<c.length;s++){var i,u;o()}}(e[1],e[2],e[3])})),_t.subscribe((function(t){return function(t){if(null==Tt)return;if(t&&t.length>0){var e=Object.values(Rt._layers).find((function(e){return t==e.feature.properties.ctyua19cd}));if(e)Dt(L.latLng(e.feature.properties.lat,e.feature.properties.long),e),Tt.setView(e.getCenter(),9,{animate:!0}),window.scrollTo(0,0)}else Tt.closePopup(),Tt.setView(qt,7,{animate:!0}),window.scrollTo(0,0)}(t)}));class Vt extends lt{constructor(t){super(),at(this,t,Ht,Ut,c,{})}}function Ft(e){let n,r,o,s,c,i,u;return{c(){n=v("section"),r=v("h2"),o=y(e[0]),s=b(),c=v("input"),x(r,"class","svelte-m3mxtw"),x(c,"type","range"),x(c,"min","0"),x(c,"max",i=e[1].length-1),c.value=e[2],x(c,"class","svelte-m3mxtw"),x(n,"class","svelte-m3mxtw")},m(t,i){g(t,n,i),p(n,r),p(r,o),p(n,s),p(n,c),u=w(c,"input",e[3])},p(t,[e]){1&e&&C(o,t[0]),2&e&&i!==(i=t[1].length-1)&&x(c,"max",i),4&e&&(c.value=t[2])},i:t,o:t,d(t){t&&h(n),u()}}}function Gt(t,e,n){let r,o,s;u(t,Ct,t=>n(4,r=t)),u(t,bt,t=>n(1,o=t)),u(t,Ot,t=>n(2,s=t));const c=new Intl.DateTimeFormat("en-GB",{weekday:"short",year:"numeric",month:"long",day:"numeric"});let i="Date";return t.$$.update=()=>{16&t.$$.dirty&&r&&n(0,i=c.format(new Date(r)))},[i,o,s,t=>{Ct.set(o[t.target.value])}]}class Wt extends lt{constructor(t){super(),at(this,t,Gt,Ft,c,{})}}function Zt(e){let n,r,s,c,i,u,a,l,f;return{c(){n=v("section"),r=v("h2"),r.textContent="Search for a region",s=b(),c=v("div"),i=v("input"),u=b(),a=v("div"),l=v("button"),l.innerHTML='<img src="img/close.svg" alt="clear" class="svelte-qj2m8d">',x(r,"class","svelte-qj2m8d"),x(i,"class","svelte-qj2m8d"),x(l,"class","svelte-qj2m8d"),x(a,"class","svelte-qj2m8d"),x(c,"class","inputgroup svelte-qj2m8d"),x(n,"class","svelte-qj2m8d")},m(t,o){g(t,n,o),p(n,r),p(n,s),p(n,c),p(c,i),_(i,e[0]),p(c,u),p(c,a),p(a,l),f=[w(i,"input",e[2]),w(l,"click",e[1])]},p(t,[e]){1&e&&i.value!==t[0]&&_(i,t[0])},i:t,o:t,d(t){t&&h(n),o(f)}}}function Jt(t,e,n){let r;u(t,jt,t=>n(0,r=t));return[r,()=>jt.set(""),function(){r=this.value,jt.set(r)}]}class Yt extends lt{constructor(t){super(),at(this,t,Jt,Zt,c,{})}}function Kt(e){let n,r,o;const s=new Wt({}),c=new Yt({});return{c(){n=v("section"),st(s.$$.fragment),r=b(),st(c.$$.fragment),x(n,"class","svelte-1dtbawg")},m(t,e){g(t,n,e),ct(s,n,null),p(n,r),ct(c,n,null),o=!0},p:t,i(t){o||(tt(s.$$.fragment,t),tt(c.$$.fragment,t),o=!0)},o(t){et(s.$$.fragment,t),et(c.$$.fragment,t),o=!1},d(t){t&&h(n),it(s),it(c)}}}class Qt extends lt{constructor(t){super(),at(this,t,null,Kt,c,{})}}function Xt(t,{delay:n=0,duration:r=400,easing:o=e}){const s=+getComputedStyle(t).opacity;return{delay:n,duration:r,easing:o,css:t=>`opacity: ${t*s}`}}function te(t){let e,n,r,o,s,c,i,u,a,l,f,d;return{c(){e=v("div"),n=v("div"),r=y(t[0]),o=b(),s=v("span"),c=y(t[2]),i=b(),u=v("span"),a=y(t[3]),x(n,"class","name svelte-4wr1yv"),x(s,"class","count svelte-4wr1yv"),x(u,"class","change svelte-4wr1yv"),j(u,"increase",t[4]),j(u,"decrease",t[5]),j(u,"same",t[6]),x(e,"class","item svelte-4wr1yv"),j(e,"hoverable",t[1]),j(e,"selected",t[7])},m(l,m){g(l,e,m),p(e,n),p(n,r),p(e,o),p(e,s),p(s,c),p(e,i),p(e,u),p(u,a),f=!0,d=w(e,"click",t[12])},p(t,[n]){(!f||1&n)&&C(r,t[0]),(!f||4&n)&&C(c,t[2]),(!f||8&n)&&C(a,t[3]),16&n&&j(u,"increase",t[4]),32&n&&j(u,"decrease",t[5]),64&n&&j(u,"same",t[6]),2&n&&j(e,"hoverable",t[1]),128&n&&j(e,"selected",t[7])},i(t){f||(H(()=>{l||(l=rt(e,Xt,{},!0)),l.run(1)}),f=!0)},o(t){l||(l=rt(e,Xt,{},!1)),l.run(0),f=!1},d(t){t&&h(e),t&&l&&l.end(),d()}}}function ee(t,e,n){let{name:r}=e,{cases:o}=e,{caseIndex:s}=e,{code:c=null}=e,{focusRegion:i=null}=e;const u=function(){const t=P();return(e,n)=>{const r=t.$$.callbacks[e];if(r){const o=O(e,n);r.slice().forEach(e=>{e.call(t,o)})}}}();let a,l,f,d,m,p;return t.$set=t=>{"name"in t&&n(0,r=t.name),"cases"in t&&n(9,o=t.cases),"caseIndex"in t&&n(10,s=t.caseIndex),"code"in t&&n(1,c=t.code),"focusRegion"in t&&n(11,i=t.focusRegion)},t.$$.update=()=>{3598&t.$$.dirty&&(n(2,a=o[s]),n(3,l=0==s?a:a-o[Math.max(s-1,0)]),n(4,f=l>0),n(5,d=l<0),n(6,m=0==l),n(7,p=c&&c==i))},[r,c,a,l,f,d,m,p,u,o,s,i,()=>u("click",c)]}class ne extends lt{constructor(t){super(),at(this,t,ee,te,c,{name:0,cases:9,caseIndex:10,code:1,focusRegion:11})}}function re(t,e,n){const r=t.slice();return r[2]=e[n][0],r[3]=e[n][1],r}function oe(t){let e;const n=new ne({props:{name:t[2],cases:t[3],caseIndex:t[1]}});return{c(){st(n.$$.fragment)},m(t,r){ct(n,t,r),e=!0},p(t,e){const r={};1&e&&(r.name=t[2]),1&e&&(r.cases=t[3]),2&e&&(r.caseIndex=t[1]),n.$set(r)},i(t){e||(tt(n.$$.fragment,t),e=!0)},o(t){et(n.$$.fragment,t),e=!1},d(t){it(n,t)}}}function se(t){let e,n,r,o,s,c=Object.entries(t[0]),i=[];for(let e=0;e<c.length;e+=1)i[e]=oe(re(t,c,e));const u=t=>et(i[t],1,1,()=>{i[t]=null});return{c(){e=v("section"),n=v("h2"),n.textContent="Summary",r=b(),o=v("div");for(let t=0;t<i.length;t+=1)i[t].c();x(n,"class","svelte-cgyc1b"),x(o,"class","container svelte-cgyc1b"),x(e,"class","svelte-cgyc1b")},m(t,c){g(t,e,c),p(e,n),p(e,r),p(e,o);for(let t=0;t<i.length;t+=1)i[t].m(o,null);s=!0},p(t,[e]){if(3&e){let n;for(c=Object.entries(t[0]),n=0;n<c.length;n+=1){const r=re(t,c,n);i[n]?(i[n].p(r,e),tt(i[n],1)):(i[n]=oe(r),i[n].c(),tt(i[n],1),i[n].m(o,null))}for(Q(),n=c.length;n<i.length;n+=1)u(n);X()}},i(t){if(!s){for(let t=0;t<c.length;t+=1)tt(i[t]);s=!0}},o(t){i=i.filter(Boolean);for(let t=0;t<i.length;t+=1)et(i[t]);s=!1},d(t){t&&h(e),$(i,t)}}}function ce(t,e,n){let r,o;return u(t,wt,t=>n(0,r=t)),u(t,Ot,t=>n(1,o=t)),[r,o]}class ie extends lt{constructor(t){super(),at(this,t,ce,se,c,{})}}function ue(e){let n,r;return{c(){n=v("h2"),r=y(e[0]),x(n,"class","svelte-cofq7b")},m(t,e){g(t,n,e),p(n,r)},p(t,[e]){1&e&&C(r,t[0])},i:t,o:t,d(t){t&&h(n)}}}function ae(t,e,n){let{prefix:r}=e;return t.$set=t=>{"prefix"in t&&n(0,r=t.prefix)},[r]}class le extends lt{constructor(t){super(),at(this,t,ae,ue,c,{prefix:0})}}function fe(t,e,n){const r=t.slice();return r[12]=e[n].name,r[13]=e[n].item,r}function de(t,e,n){const r=t.slice();return r[8]=e[n][0],r[9]=e[n][1],r}function me(t,e){let n,r;const o=new ne({props:{name:e[12],cases:e[13].Cases,caseIndex:e[2],code:e[13].Codes[0],focusRegion:e[1]}});return o.$on("click",e[3]),{key:t,first:null,c(){n=y(""),st(o.$$.fragment),this.first=n},m(t,e){g(t,n,e),ct(o,t,e),r=!0},p(t,e){const n={};1&e&&(n.name=t[12]),1&e&&(n.cases=t[13].Cases),4&e&&(n.caseIndex=t[2]),1&e&&(n.code=t[13].Codes[0]),2&e&&(n.focusRegion=t[1]),o.$set(n)},i(t){r||(tt(o.$$.fragment,t),r=!0)},o(t){et(o.$$.fragment,t),r=!1},d(t){t&&h(n),it(o,t)}}}function pe(t){let e,n,r,o=[],s=new Map;const c=new le({props:{prefix:t[8]}});let i=t[9];const u=t=>t[12];for(let e=0;e<i.length;e+=1){let n=fe(t,i,e),r=u(n);s.set(r,o[e]=me(r,n))}return{c(){st(c.$$.fragment),e=b(),n=v("div");for(let t=0;t<o.length;t+=1)o[t].c();x(n,"class","container svelte-ox950")},m(t,s){ct(c,t,s),g(t,e,s),g(t,n,s);for(let t=0;t<o.length;t+=1)o[t].m(n,null);r=!0},p(t,e){const r={};if(1&e&&(r.prefix=t[8]),c.$set(r),15&e){const r=t[9];Q(),o=function(t,e,n,r,o,s,c,i,u,a,l,f){let d=t.length,m=s.length,p=d;const g={};for(;p--;)g[t[p].key]=p;const h=[],$=new Map,v=new Map;for(p=m;p--;){const t=f(o,s,p),i=n(t);let u=c.get(i);u?r&&u.p(t,e):(u=a(i,t),u.c()),$.set(i,h[p]=u),i in g&&v.set(i,Math.abs(p-g[i]))}const y=new Set,b=new Set;function w(t){tt(t,1),t.m(i,l),c.set(t.key,t),l=t.first,m--}for(;d&&m;){const e=h[m-1],n=t[d-1],r=e.key,o=n.key;e===n?(l=e.first,d--,m--):$.has(o)?!c.has(r)||y.has(r)?w(e):b.has(o)?d--:v.get(r)>v.get(o)?(b.add(r),w(e)):(y.add(o),d--):(u(n,c),d--)}for(;d--;){const e=t[d];$.has(e.key)||u(e,c)}for(;m;)w(h[m-1]);return h}(o,e,u,1,t,r,s,n,ot,me,null,fe),X()}},i(t){if(!r){tt(c.$$.fragment,t);for(let t=0;t<i.length;t+=1)tt(o[t]);r=!0}},o(t){et(c.$$.fragment,t);for(let t=0;t<o.length;t+=1)et(o[t]);r=!1},d(t){it(c,t),t&&h(e),t&&h(n);for(let t=0;t<o.length;t+=1)o[t].d()}}}function ge(t){let e,n,r;const o=new le({props:{prefix:"-"}});return{c(){st(o.$$.fragment),e=b(),n=v("div"),n.textContent="No regions found",x(n,"class","no-regions svelte-ox950")},m(t,s){ct(o,t,s),g(t,e,s),g(t,n,s),r=!0},i(t){r||(tt(o.$$.fragment,t),r=!0)},o(t){et(o.$$.fragment,t),r=!1},d(t){it(o,t),t&&h(e),t&&h(n)}}}function he(t){let e,n,r,o=0==Object.keys(t[0]).length,s=Object.entries(t[0]),c=[];for(let e=0;e<s.length;e+=1)c[e]=pe(de(t,s,e));const i=t=>et(c[t],1,1,()=>{c[t]=null});let u=o&&ge();return{c(){e=v("section");for(let t=0;t<c.length;t+=1)c[t].c();n=b(),u&&u.c(),x(e,"class","svelte-ox950")},m(t,o){g(t,e,o);for(let t=0;t<c.length;t+=1)c[t].m(e,null);p(e,n),u&&u.m(e,null),r=!0},p(t,[r]){if(15&r){let o;for(s=Object.entries(t[0]),o=0;o<s.length;o+=1){const i=de(t,s,o);c[o]?(c[o].p(i,r),tt(c[o],1)):(c[o]=pe(i),c[o].c(),tt(c[o],1),c[o].m(e,n))}for(Q(),o=s.length;o<c.length;o+=1)i(o);X()}1&r&&(o=0==Object.keys(t[0]).length),o?u?tt(u,1):(u=ge(),u.c(),tt(u,1),u.m(e,null)):u&&(Q(),et(u,1,1,()=>{u=null}),X())},i(t){if(!r){for(let t=0;t<s.length;t+=1)tt(c[t]);tt(u),r=!0}},o(t){c=c.filter(Boolean);for(let t=0;t<c.length;t+=1)et(c[t]);et(u),r=!1},d(t){t&&h(e),$(c,t),u&&u.d()}}}function $e(t,e,n){let r,o,s,c;u(t,_t,t=>n(1,r=t)),u(t,xt,t=>n(4,o=t)),u(t,jt,t=>n(5,s=t)),u(t,Ot,t=>n(2,c=t));let i=[],a=(t,[e,n])=>{let r=e[0];return r in t?t[r].push({name:e,item:n}):t[r]=[{name:e,item:n}],t};return t.$$.update=()=>{48&t.$$.dirty&&n(0,i=Object.entries(o).filter(([t,e])=>{return n=s,t.toUpperCase().includes((n||"").toUpperCase());var n}).reduce(a,{}))},[i,r,c,t=>{t.detail==r?_t.set(null):_t.set(t.detail)}]}class ve extends lt{constructor(t){super(),at(this,t,$e,he,c,{})}}function ye(e){let n;return{c(){n=v("footer"),n.innerHTML='<ul class="svelte-xv4q4t"><li>Source: Office for National Statistics licensed under the Open Government Licence v.3.0</li> \n\t\t<li>Website <a href="https://github.com/Temetra/COVID-19-Interactive-Map-England">available on GitHub</a>, licensed under MIT</li></ul>',x(n,"class","svelte-xv4q4t")},m(t,e){g(t,n,e)},p:t,i:t,o:t,d(t){t&&h(n)}}}class be extends lt{constructor(t){super(),at(this,t,null,ye,c,{})}}function we(e){let n,r,o,s,c,i,u;const a=new Mt({}),l=new Vt({}),f=new Qt({}),d=new ie({}),m=new ve({}),$=new be({});return{c(){n=v("div"),st(a.$$.fragment),r=b(),st(l.$$.fragment),o=b(),st(f.$$.fragment),s=b(),st(d.$$.fragment),c=b(),st(m.$$.fragment),i=b(),st($.$$.fragment),x(n,"class","container svelte-dg7yne")},m(t,e){g(t,n,e),ct(a,n,null),p(n,r),ct(l,n,null),p(n,o),ct(f,n,null),p(n,s),ct(d,n,null),p(n,c),ct(m,n,null),p(n,i),ct($,n,null),u=!0},p:t,i(t){u||(tt(a.$$.fragment,t),tt(l.$$.fragment,t),tt(f.$$.fragment,t),tt(d.$$.fragment,t),tt(m.$$.fragment,t),tt($.$$.fragment,t),u=!0)},o(t){et(a.$$.fragment,t),et(l.$$.fragment,t),et(f.$$.fragment,t),et(d.$$.fragment,t),et(m.$$.fragment,t),et($.$$.fragment,t),u=!1},d(t){t&&h(n),it(a),it(l),it(f),it(d),it(m),it($)}}}function xe(t){return R(Et),[]}var Ce=new class extends lt{constructor(t){super(),at(this,t,xe,we,c,{})}}({target:document.body});return window.app=Ce,Ce}();
