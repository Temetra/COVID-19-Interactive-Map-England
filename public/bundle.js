var app=function(){"use strict";function e(){}const t=e=>e;function n(e){return e()}function r(){return Object.create(null)}function o(e){e.forEach(n)}function s(e){return"function"==typeof e}function c(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function i(t,...n){if(null==t)return e;const r=t.subscribe(...n);return r.unsubscribe?()=>r.unsubscribe():r}function a(e,t,n){e.$$.on_destroy.push(i(t,n))}const l="undefined"!=typeof window;let u=l?()=>window.performance.now():()=>Date.now(),f=l?e=>requestAnimationFrame(e):e;const d=new Set;function p(e){d.forEach(t=>{t.c(e)||(d.delete(t),t.f())}),0!==d.size&&f(p)}function m(e,t){e.appendChild(t)}function g(e,t,n){e.insertBefore(t,n||null)}function h(e){e.parentNode.removeChild(e)}function $(e,t){for(let n=0;n<e.length;n+=1)e[n]&&e[n].d(t)}function v(e){return document.createElement(e)}function y(e){return document.createTextNode(e)}function b(){return y(" ")}function w(e,t,n,r){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n,r)}function x(e,t,n){null==n?e.removeAttribute(t):e.getAttribute(t)!==n&&e.setAttribute(t,n)}function O(e,t){t=""+t,e.data!==t&&(e.data=t)}function j(e,t){(null!=t||e.value)&&(e.value=t)}function C(e,t,n){e.classList[n?"add":"remove"](t)}function _(e,t){const n=document.createEvent("CustomEvent");return n.initCustomEvent(e,!1,!1,t),n}let k,A,E=0,S={};function M(e,t,n,r,o,s,c,i=0){const a=16.666/r;let l="{\n";for(let e=0;e<=1;e+=a){const r=t+(n-t)*s(e);l+=100*e+`%{${c(r,1-r)}}\n`}const u=l+`100% {${c(n,1-n)}}\n}`,f=`__svelte_${function(e){let t=5381,n=e.length;for(;n--;)t=(t<<5)-t^e.charCodeAt(n);return t>>>0}(u)}_${i}`;if(!S[f]){if(!k){const e=v("style");document.head.appendChild(e),k=e.sheet}S[f]=!0,k.insertRule(`@keyframes ${f} ${u}`,k.cssRules.length)}const d=e.style.animation||"";return e.style.animation=`${d?`${d}, `:""}${f} ${r}ms linear ${o}ms 1 both`,E+=1,f}function P(e,t){e.style.animation=(e.style.animation||"").split(", ").filter(t?e=>e.indexOf(t)<0:e=>-1===e.indexOf("__svelte")).join(", "),t&&!--E&&f(()=>{if(E)return;let e=k.cssRules.length;for(;e--;)k.deleteRule(e);S={}})}function T(e){A=e}function I(){if(!A)throw new Error("Function called outside component initialization");return A}const D=[],q=[],N=[],R=[],B=Promise.resolve();let z=!1;function H(e){N.push(e)}let U=!1;const V=new Set;function F(){if(!U){U=!0;do{for(let e=0;e<D.length;e+=1){const t=D[e];T(t),G(t.$$)}for(D.length=0;q.length;)q.pop()();for(let e=0;e<N.length;e+=1){const t=N[e];V.has(t)||(V.add(t),t())}N.length=0}while(D.length);for(;R.length;)R.pop()();z=!1,U=!1,V.clear()}}function G(e){if(null!==e.fragment){e.update(),o(e.before_update);const t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(H)}}let W;function Z(e,t,n){e.dispatchEvent(_(`${t?"intro":"outro"}${n}`))}const J=new Set;let Y;function K(){Y={r:0,c:[],p:Y}}function Q(){Y.r||o(Y.c),Y=Y.p}function X(e,t){e&&e.i&&(J.delete(e),e.i(t))}function ee(e,t,n,r){if(e&&e.o){if(J.has(e))return;J.add(e),Y.c.push(()=>{J.delete(e),r&&(n&&e.d(1),r())}),e.o(t)}}const te={duration:0};function ne(n,r,c,i){let a=r(n,c),l=i?0:1,m=null,g=null,h=null;function $(){h&&P(n,h)}function v(e,t){const n=e.b-l;return t*=Math.abs(n),{a:l,b:e.b,d:n,duration:t,start:e.start,end:e.start+t,group:e.group}}function y(r){const{delay:s=0,duration:c=300,easing:i=t,tick:y=e,css:b}=a||te,w={start:u()+s,b:r};r||(w.group=Y,Y.r+=1),m?g=w:(b&&($(),h=M(n,l,r,c,s,i,b)),r&&y(0,1),m=v(w,c),H(()=>Z(n,r,"start")),function(e){let t;0===d.size&&f(p),new Promise(n=>{d.add(t={c:e,f:n})})}(e=>{if(g&&e>g.start&&(m=v(g,c),g=null,Z(n,m.b,"start"),b&&($(),h=M(n,l,m.b,m.duration,0,i,a.css))),m)if(e>=m.end)y(l=m.b,1-l),Z(n,m.b,"end"),g||(m.b?$():--m.group.r||o(m.group.c)),m=null;else if(e>=m.start){const t=e-m.start;l=m.a+m.d*i(t/m.duration),y(l,1-l)}return!(!m&&!g)}))}return{run(e){s(a)?(W||(W=Promise.resolve(),W.then(()=>{W=null})),W).then(()=>{a=a(),y(e)}):y(e)},end(){$(),m=g=null}}}function re(e,t){ee(e,1,1,()=>{t.delete(e.key)})}function oe(e){e&&e.c()}function se(e,t,r){const{fragment:c,on_mount:i,on_destroy:a,after_update:l}=e.$$;c&&c.m(t,r),H(()=>{const t=i.map(n).filter(s);a?a.push(...t):o(t),e.$$.on_mount=[]}),l.forEach(H)}function ce(e,t){const n=e.$$;null!==n.fragment&&(o(n.on_destroy),n.fragment&&n.fragment.d(t),n.on_destroy=n.fragment=null,n.ctx=[])}function ie(e,t){-1===e.$$.dirty[0]&&(D.push(e),z||(z=!0,B.then(F)),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function ae(t,n,s,c,i,a,l=[-1]){const u=A;T(t);const f=n.props||{},d=t.$$={fragment:null,ctx:null,props:a,update:e,not_equal:i,bound:r(),on_mount:[],on_destroy:[],before_update:[],after_update:[],context:new Map(u?u.$$.context:[]),callbacks:r(),dirty:l};let p=!1;d.ctx=s?s(t,f,(e,n,...r)=>{const o=r.length?r[0]:n;return d.ctx&&i(d.ctx[e],d.ctx[e]=o)&&(d.bound[e]&&d.bound[e](o),p&&ie(t,e)),n}):[],d.update(),p=!0,o(d.before_update),d.fragment=!!c&&c(d.ctx),n.target&&(n.hydrate?d.fragment&&d.fragment.l(function(e){return Array.from(e.childNodes)}(n.target)):d.fragment&&d.fragment.c(),n.intro&&X(t.$$.fragment),se(t,n.target,n.anchor),F()),T(u)}class le{$destroy(){ce(this,1),this.$destroy=e}$on(e,t){const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const e=n.indexOf(t);-1!==e&&n.splice(e,1)}}$set(){}}function ue(t){let n;return{c(){n=v("header"),n.innerHTML='<h1 class="svelte-r1hr4i">Interactive map of Coronavirus (COVID-19) cases in England</h1>',x(n,"class","svelte-r1hr4i")},m(e,t){g(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}class fe extends le{constructor(e){super(),ae(this,e,null,ue,c,{})}}function de(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function pe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function me(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pe(Object(n),!0).forEach((function(t){de(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ge(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,s=void 0;try{for(var c,i=e[Symbol.iterator]();!(r=(c=i.next()).done)&&(n.push(c.value),!t||n.length!==t);r=!0);}catch(e){o=!0,s=e}finally{try{r||null==i.return||i.return()}finally{if(o)throw s}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function he(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}var $e,ve,ye,be={lat:52.914639,lon:-1.47189};function we(e){if(null==$e||null==e)return null;ve&&ve.remove(),(ve=L.control({position:"topright"})).onAdd=function(){var t=L.DomUtil.create("div","info legend"),n=!0,r=!1,o=void 0;try{for(var s,c=function(e){if(0==e)return[];var t=_e(e),n=t.map((function(e){return e-1}));return n.shift(),n.push(e),["Unknown"].concat(he(t.map((function(e,t){return 0==t?"0 cases":"".concat(e,"-").concat(n[t]," cases")})))).map((function(e,t){return{label:e,color:je[t]}}))}(e)[Symbol.iterator]();!(n=(s=c.next()).done);n=!0){var i=s.value;t.innerHTML+='<div class="keyitem">\n\t\t\t\t<div class="color '.concat(i.color,'"><div></div></div>\n\t\t\t\t<div class="label">').concat(i.label,"</div>\n\t\t\t</div>")}}catch(e){r=!0,o=e}finally{try{n||null==c.return||c.return()}finally{if(r)throw o}}return t},ve.addTo($e)}function xe(e){var t=e.feature.properties.mergedAuthority||e.feature.properties.ctyua19nm,n=e.feature.properties.casesCount;return null==n?"".concat(t,"<br/>No data"):"".concat(t,"<br/>").concat(n," case").concat(1==n?"":"s")}function Oe(e,t){var n=xe(t);t.bindPopup(n,{className:"region-popup"}).addTo($e),t.openPopup(e)}var je=["region-unknown","region-zero","region-one","region-two","region-three","region-four","region-five"],Ce=Array(je.length-2);function _e(e){return[0].concat(he(Array.from(Ce,(function(t,n){return Math.ceil(e/(je.length-2)*n+1)}))))}function ke(e,t){if(null==e)return je[0];for(var n=_e(t),r=n.length;r>=0;r--)if(e>=n[r])return je[r+1]}const Ae=[];function Ee(t,n=e){let r;const o=[];function s(e){if(c(t,e)&&(t=e,r)){const e=!Ae.length;for(let e=0;e<o.length;e+=1){const n=o[e];n[1](),Ae.push(n,t)}if(e){for(let e=0;e<Ae.length;e+=2)Ae[e][0](Ae[e+1]);Ae.length=0}}}return{set:s,update:function(e){s(e(t))},subscribe:function(c,i=e){const a=[c,i];return o.push(a),1===o.length&&(r=n(s)||e),c(t),()=>{const e=o.indexOf(a);-1!==e&&o.splice(e,1),0===o.length&&(r(),r=null)}}}}function Se(t,n,r){const c=!Array.isArray(t),a=c?[t]:t,l=n.length<2;return{subscribe:Ee(r,t=>{let r=!1;const u=[];let f=0,d=e;const p=()=>{if(f)return;d();const r=n(c?u[0]:u,t);l?t(r):d=s(r)?r:e},m=a.map((e,t)=>i(e,e=>{u[t]=e,f&=~(1<<t),r&&p()},()=>{f|=1<<t}));return r=!0,p(),function(){o(m),d()}}).subscribe}}var Me=Ee(),Le=Ee([]),Pe=Ee({}),Te=Ee({}),Ie=Ee(),De=Ee(),qe=Ee(),Ne=Se([Ie,Le],(function(e){var t=ge(e,2),n=t[0];return t[1].indexOf(n)})),Re=Se(Te,(function(e){return function(e){return Object.values(e).reduce((function(e,t){return t.Cases.reduce((function(e,t){return Math.max(e,t)}),e)}),0)}(e)})),Be=(Se([Te,Ne],(function(e){var t=ge(e,2);return function(e,t){return Object.values(e).reduce((function(e,n){return Math.max(e,n.Cases[t])}),0)}(t[0],t[1])})),Se(Te,(function(e){return function(e){return Object.entries(e).reduce((function(e,t){var n=ge(t,2),r=n[0],o=n[1],s=o.Codes.reduce((function(e,t){return me({},e,de({},t,{Name:r,Cases:o.Cases}))}),{});return me({},e,{},s)}),{})}(e)})));function ze(t){let n;return{c(){n=v("section"),n.innerHTML='<div id="leaflet_ele" class="svelte-1gesra4"></div>',x(n,"class","svelte-1gesra4")},m(e,t){g(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}function He(e,t,n){let r,o,s,c,i;return a(e,Me,e=>n(0,r=e)),a(e,Re,e=>n(1,o=e)),a(e,Be,e=>n(2,s=e)),a(e,Ne,e=>n(3,c=e)),a(e,De,e=>n(4,i=e)),e.$$.update=()=>{1&e.$$.dirty&&function(e){null==$e&&null!=e&&(($e=L.map("leaflet_ele",{center:be,zoom:7})).getPane("overlayPane").classList.add("blend-overlay-pane"),L.tileLayer("https://stamen-tiles-{s}.a.ssl.fastly.net/toner-lite/{z}/{x}/{y}{r}.{ext}",{attribution:'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',subdomains:"abcd",minZoom:0,maxZoom:20,ext:"png"}).addTo($e),ye&&ye.remove(),(ye=L.geoJSON(e,{style:function(e){return{fillOpacity:.5,weight:0}},onEachFeature:function(e,t){t.on({click:function(e){return Oe(e.latlng,e.sourceTarget)}})}})).addTo($e))}(r),2&e.$$.dirty&&we(o),14&e.$$.dirty&&function(e,t,n){if(null!=ye)for(var r=0,o=Object.values(ye._layers);r<o.length;r++){var s=o[r],c=t[s.feature.properties.ctyua19cd],i=c?c.Cases[n]:null;if(s._path.setAttribute("fill-opacity",1),s._path.setAttribute("class","leaflet-interactive "+ke(i,e)),s.feature.properties.casesCount=i,c&&s.feature.properties.ctyua19nm!=c.Name&&(s.feature.properties.mergedAuthority=c.Name),s.isPopupOpen()){var a=s.getPopup(),l=xe(s);a.setContent(l)}}}(o,s,c),16&e.$$.dirty&&function(e){if(null!=$e)if(e&&e.length>0){var t=Object.values(ye._layers).find((function(t){return e==t.feature.properties.ctyua19cd}));if(t)Oe(L.latLng(t.feature.properties.lat,t.feature.properties.long),t),$e.setView(t.getCenter(),9,{animate:!0}),window.scrollTo(0,0)}else $e.closePopup(),$e.setView(be,7,{animate:!0}),window.scrollTo(0,0)}(i)},[]}Le.subscribe((function(e){e&&e.length>0&&Ie.set(e[e.length-1])}));class Ue extends le{constructor(e){super(),ae(this,e,He,ze,c,{})}}function Ve(t){let n,r,o,s,c,i,a;return{c(){n=v("section"),r=v("h2"),o=y(t[0]),s=b(),c=v("input"),x(r,"class","svelte-m3mxtw"),x(c,"type","range"),x(c,"min","0"),x(c,"max",i=t[1].length-1),c.value=t[2],x(c,"class","svelte-m3mxtw"),x(n,"class","svelte-m3mxtw")},m(e,i){g(e,n,i),m(n,r),m(r,o),m(n,s),m(n,c),a=w(c,"input",t[3])},p(e,[t]){1&t&&O(o,e[0]),2&t&&i!==(i=e[1].length-1)&&x(c,"max",i),4&t&&(c.value=e[2])},i:e,o:e,d(e){e&&h(n),a()}}}function Fe(e,t,n){let r,o,s;a(e,Ie,e=>n(4,r=e)),a(e,Le,e=>n(1,o=e)),a(e,Ne,e=>n(2,s=e));const c=new Intl.DateTimeFormat("en-GB",{weekday:"short",year:"numeric",month:"long",day:"numeric"});let i="Date";return e.$$.update=()=>{16&e.$$.dirty&&r&&n(0,i=c.format(new Date(r)))},[i,o,s,e=>{Ie.set(o[e.target.value])}]}class Ge extends le{constructor(e){super(),ae(this,e,Fe,Ve,c,{})}}function We(t){let n,r,s,c,i,a,l,u,f;return{c(){n=v("section"),r=v("h2"),r.textContent="Search for a region",s=b(),c=v("div"),i=v("input"),a=b(),l=v("div"),u=v("button"),u.innerHTML='<img src="img/close.svg" alt="clear" class="svelte-qj2m8d">',x(r,"class","svelte-qj2m8d"),x(i,"class","svelte-qj2m8d"),x(u,"class","svelte-qj2m8d"),x(l,"class","svelte-qj2m8d"),x(c,"class","inputgroup svelte-qj2m8d"),x(n,"class","svelte-qj2m8d")},m(e,o){g(e,n,o),m(n,r),m(n,s),m(n,c),m(c,i),j(i,t[0]),m(c,a),m(c,l),m(l,u),f=[w(i,"input",t[2]),w(u,"click",t[1])]},p(e,[t]){1&t&&i.value!==e[0]&&j(i,e[0])},i:e,o:e,d(e){e&&h(n),o(f)}}}function Ze(e,t,n){let r;a(e,qe,e=>n(0,r=e));return[r,()=>qe.set(""),function(){r=this.value,qe.set(r)}]}class Je extends le{constructor(e){super(),ae(this,e,Ze,We,c,{})}}function Ye(t){let n,r,o;const s=new Ge({}),c=new Je({});return{c(){n=v("section"),oe(s.$$.fragment),r=b(),oe(c.$$.fragment),x(n,"class","svelte-1dtbawg")},m(e,t){g(e,n,t),se(s,n,null),m(n,r),se(c,n,null),o=!0},p:e,i(e){o||(X(s.$$.fragment,e),X(c.$$.fragment,e),o=!0)},o(e){ee(s.$$.fragment,e),ee(c.$$.fragment,e),o=!1},d(e){e&&h(n),ce(s),ce(c)}}}class Ke extends le{constructor(e){super(),ae(this,e,null,Ye,c,{})}}function Qe(e,{delay:n=0,duration:r=400,easing:o=t}){const s=+getComputedStyle(e).opacity;return{delay:n,duration:r,easing:o,css:e=>`opacity: ${e*s}`}}function Xe(e){let t,n,r,o,s,c,i,a,l,u,f,d;return{c(){t=v("div"),n=v("div"),r=y(e[0]),o=b(),s=v("span"),c=y(e[2]),i=b(),a=v("span"),l=y(e[3]),x(n,"class","name svelte-4wr1yv"),x(s,"class","count svelte-4wr1yv"),x(a,"class","change svelte-4wr1yv"),C(a,"increase",e[4]),C(a,"decrease",e[5]),C(a,"same",e[6]),x(t,"class","item svelte-4wr1yv"),C(t,"hoverable",e[1]),C(t,"selected",e[7])},m(u,p){g(u,t,p),m(t,n),m(n,r),m(t,o),m(t,s),m(s,c),m(t,i),m(t,a),m(a,l),f=!0,d=w(t,"click",e[12])},p(e,[n]){(!f||1&n)&&O(r,e[0]),(!f||4&n)&&O(c,e[2]),(!f||8&n)&&O(l,e[3]),16&n&&C(a,"increase",e[4]),32&n&&C(a,"decrease",e[5]),64&n&&C(a,"same",e[6]),2&n&&C(t,"hoverable",e[1]),128&n&&C(t,"selected",e[7])},i(e){f||(H(()=>{u||(u=ne(t,Qe,{},!0)),u.run(1)}),f=!0)},o(e){u||(u=ne(t,Qe,{},!1)),u.run(0),f=!1},d(e){e&&h(t),e&&u&&u.end(),d()}}}function et(e,t,n){let{name:r}=t,{cases:o}=t,{caseIndex:s}=t,{code:c=null}=t,{focusRegion:i=null}=t;const a=function(){const e=I();return(t,n)=>{const r=e.$$.callbacks[t];if(r){const o=_(t,n);r.slice().forEach(t=>{t.call(e,o)})}}}();let l,u,f,d,p,m;return e.$set=e=>{"name"in e&&n(0,r=e.name),"cases"in e&&n(9,o=e.cases),"caseIndex"in e&&n(10,s=e.caseIndex),"code"in e&&n(1,c=e.code),"focusRegion"in e&&n(11,i=e.focusRegion)},e.$$.update=()=>{3598&e.$$.dirty&&(n(2,l=o[s]),n(3,u=0==s?l:l-o[Math.max(s-1,0)]),n(4,f=u>0),n(5,d=u<0),n(6,p=0==u),n(7,m=c&&c==i))},[r,c,l,u,f,d,p,m,a,o,s,i,()=>a("click",c)]}class tt extends le{constructor(e){super(),ae(this,e,et,Xe,c,{name:0,cases:9,caseIndex:10,code:1,focusRegion:11})}}function nt(e,t,n){const r=e.slice();return r[2]=t[n][0],r[3]=t[n][1],r}function rt(e){let t;const n=new tt({props:{name:e[2],cases:e[3],caseIndex:e[1]}});return{c(){oe(n.$$.fragment)},m(e,r){se(n,e,r),t=!0},p(e,t){const r={};1&t&&(r.name=e[2]),1&t&&(r.cases=e[3]),2&t&&(r.caseIndex=e[1]),n.$set(r)},i(e){t||(X(n.$$.fragment,e),t=!0)},o(e){ee(n.$$.fragment,e),t=!1},d(e){ce(n,e)}}}function ot(e){let t,n,r,o,s,c=Object.entries(e[0]),i=[];for(let t=0;t<c.length;t+=1)i[t]=rt(nt(e,c,t));const a=e=>ee(i[e],1,1,()=>{i[e]=null});return{c(){t=v("section"),n=v("h2"),n.textContent="Summary",r=b(),o=v("div");for(let e=0;e<i.length;e+=1)i[e].c();x(n,"class","svelte-cgyc1b"),x(o,"class","container svelte-cgyc1b"),x(t,"class","svelte-cgyc1b")},m(e,c){g(e,t,c),m(t,n),m(t,r),m(t,o);for(let e=0;e<i.length;e+=1)i[e].m(o,null);s=!0},p(e,[t]){if(3&t){let n;for(c=Object.entries(e[0]),n=0;n<c.length;n+=1){const r=nt(e,c,n);i[n]?(i[n].p(r,t),X(i[n],1)):(i[n]=rt(r),i[n].c(),X(i[n],1),i[n].m(o,null))}for(K(),n=c.length;n<i.length;n+=1)a(n);Q()}},i(e){if(!s){for(let e=0;e<c.length;e+=1)X(i[e]);s=!0}},o(e){i=i.filter(Boolean);for(let e=0;e<i.length;e+=1)ee(i[e]);s=!1},d(e){e&&h(t),$(i,e)}}}function st(e,t,n){let r,o;return a(e,Pe,e=>n(0,r=e)),a(e,Ne,e=>n(1,o=e)),[r,o]}class ct extends le{constructor(e){super(),ae(this,e,st,ot,c,{})}}function it(t){let n,r;return{c(){n=v("h2"),r=y(t[0]),x(n,"class","svelte-cofq7b")},m(e,t){g(e,n,t),m(n,r)},p(e,[t]){1&t&&O(r,e[0])},i:e,o:e,d(e){e&&h(n)}}}function at(e,t,n){let{prefix:r}=t;return e.$set=e=>{"prefix"in e&&n(0,r=e.prefix)},[r]}class lt extends le{constructor(e){super(),ae(this,e,at,it,c,{prefix:0})}}function ut(e,t,n){const r=e.slice();return r[12]=t[n].name,r[13]=t[n].item,r}function ft(e,t,n){const r=e.slice();return r[8]=t[n][0],r[9]=t[n][1],r}function dt(e,t){let n,r;const o=new tt({props:{name:t[12],cases:t[13].Cases,caseIndex:t[2],code:t[13].Codes[0],focusRegion:t[1]}});return o.$on("click",t[3]),{key:e,first:null,c(){n=y(""),oe(o.$$.fragment),this.first=n},m(e,t){g(e,n,t),se(o,e,t),r=!0},p(e,t){const n={};1&t&&(n.name=e[12]),1&t&&(n.cases=e[13].Cases),4&t&&(n.caseIndex=e[2]),1&t&&(n.code=e[13].Codes[0]),2&t&&(n.focusRegion=e[1]),o.$set(n)},i(e){r||(X(o.$$.fragment,e),r=!0)},o(e){ee(o.$$.fragment,e),r=!1},d(e){e&&h(n),ce(o,e)}}}function pt(e){let t,n,r,o=[],s=new Map;const c=new lt({props:{prefix:e[8]}});let i=e[9];const a=e=>e[12];for(let t=0;t<i.length;t+=1){let n=ut(e,i,t),r=a(n);s.set(r,o[t]=dt(r,n))}return{c(){oe(c.$$.fragment),t=b(),n=v("div");for(let e=0;e<o.length;e+=1)o[e].c();x(n,"class","container svelte-ox950")},m(e,s){se(c,e,s),g(e,t,s),g(e,n,s);for(let e=0;e<o.length;e+=1)o[e].m(n,null);r=!0},p(e,t){const r={};if(1&t&&(r.prefix=e[8]),c.$set(r),15&t){const r=e[9];K(),o=function(e,t,n,r,o,s,c,i,a,l,u,f){let d=e.length,p=s.length,m=d;const g={};for(;m--;)g[e[m].key]=m;const h=[],$=new Map,v=new Map;for(m=p;m--;){const e=f(o,s,m),i=n(e);let a=c.get(i);a?r&&a.p(e,t):(a=l(i,e),a.c()),$.set(i,h[m]=a),i in g&&v.set(i,Math.abs(m-g[i]))}const y=new Set,b=new Set;function w(e){X(e,1),e.m(i,u),c.set(e.key,e),u=e.first,p--}for(;d&&p;){const t=h[p-1],n=e[d-1],r=t.key,o=n.key;t===n?(u=t.first,d--,p--):$.has(o)?!c.has(r)||y.has(r)?w(t):b.has(o)?d--:v.get(r)>v.get(o)?(b.add(r),w(t)):(y.add(o),d--):(a(n,c),d--)}for(;d--;){const t=e[d];$.has(t.key)||a(t,c)}for(;p;)w(h[p-1]);return h}(o,t,a,1,e,r,s,n,re,dt,null,ut),Q()}},i(e){if(!r){X(c.$$.fragment,e);for(let e=0;e<i.length;e+=1)X(o[e]);r=!0}},o(e){ee(c.$$.fragment,e);for(let e=0;e<o.length;e+=1)ee(o[e]);r=!1},d(e){ce(c,e),e&&h(t),e&&h(n);for(let e=0;e<o.length;e+=1)o[e].d()}}}function mt(e){let t,n,r;const o=new lt({props:{prefix:"-"}});return{c(){oe(o.$$.fragment),t=b(),n=v("div"),n.textContent="No regions found",x(n,"class","no-regions svelte-ox950")},m(e,s){se(o,e,s),g(e,t,s),g(e,n,s),r=!0},i(e){r||(X(o.$$.fragment,e),r=!0)},o(e){ee(o.$$.fragment,e),r=!1},d(e){ce(o,e),e&&h(t),e&&h(n)}}}function gt(e){let t,n,r,o=0==Object.keys(e[0]).length,s=Object.entries(e[0]),c=[];for(let t=0;t<s.length;t+=1)c[t]=pt(ft(e,s,t));const i=e=>ee(c[e],1,1,()=>{c[e]=null});let a=o&&mt();return{c(){t=v("section");for(let e=0;e<c.length;e+=1)c[e].c();n=b(),a&&a.c(),x(t,"class","svelte-ox950")},m(e,o){g(e,t,o);for(let e=0;e<c.length;e+=1)c[e].m(t,null);m(t,n),a&&a.m(t,null),r=!0},p(e,[r]){if(15&r){let o;for(s=Object.entries(e[0]),o=0;o<s.length;o+=1){const i=ft(e,s,o);c[o]?(c[o].p(i,r),X(c[o],1)):(c[o]=pt(i),c[o].c(),X(c[o],1),c[o].m(t,n))}for(K(),o=s.length;o<c.length;o+=1)i(o);Q()}1&r&&(o=0==Object.keys(e[0]).length),o?a?X(a,1):(a=mt(),a.c(),X(a,1),a.m(t,null)):a&&(K(),ee(a,1,1,()=>{a=null}),Q())},i(e){if(!r){for(let e=0;e<s.length;e+=1)X(c[e]);X(a),r=!0}},o(e){c=c.filter(Boolean);for(let e=0;e<c.length;e+=1)ee(c[e]);ee(a),r=!1},d(e){e&&h(t),$(c,e),a&&a.d()}}}function ht(e,t,n){let r,o,s,c;a(e,De,e=>n(1,r=e)),a(e,Te,e=>n(4,o=e)),a(e,qe,e=>n(5,s=e)),a(e,Ne,e=>n(2,c=e));let i=[],l=(e,[t,n])=>{let r=t[0];return r in e?e[r].push({name:t,item:n}):e[r]=[{name:t,item:n}],e};return e.$$.update=()=>{48&e.$$.dirty&&n(0,i=Object.entries(o).filter(([e,t])=>((e,t)=>e.toUpperCase().includes((t||"").toUpperCase()))(e,s)).reduce(l,{}))},[i,r,c,e=>{e.detail==r?De.set(null):De.set(e.detail)}]}class $t extends le{constructor(e){super(),ae(this,e,ht,gt,c,{})}}function vt(t){let n;return{c(){n=v("footer"),n.innerHTML='<ul class="svelte-xv4q4t"><li>Source: Office for National Statistics licensed under the Open Government Licence v.3.0</li> \n\t\t<li>Website <a href="https://github.com/Temetra/COVID-19-Interactive-Map-England">available on GitHub</a>, licensed under MIT</li></ul>',x(n,"class","svelte-xv4q4t")},m(e,t){g(e,n,t)},p:e,i:e,o:e,d(e){e&&h(n)}}}class yt extends le{constructor(e){super(),ae(this,e,null,vt,c,{})}}function bt(t){let n,r,o,s,c,i,a;const l=new fe({}),u=new Ue({}),f=new Ke({}),d=new ct({}),p=new $t({}),$=new yt({});return{c(){n=v("div"),oe(l.$$.fragment),r=b(),oe(u.$$.fragment),o=b(),oe(f.$$.fragment),s=b(),oe(d.$$.fragment),c=b(),oe(p.$$.fragment),i=b(),oe($.$$.fragment),x(n,"class","container svelte-dg7yne")},m(e,t){g(e,n,t),se(l,n,null),m(n,r),se(u,n,null),m(n,o),se(f,n,null),m(n,s),se(d,n,null),m(n,c),se(p,n,null),m(n,i),se($,n,null),a=!0},p:e,i(e){a||(X(l.$$.fragment,e),X(u.$$.fragment,e),X(f.$$.fragment,e),X(d.$$.fragment,e),X(p.$$.fragment,e),X($.$$.fragment,e),a=!0)},o(e){ee(l.$$.fragment,e),ee(u.$$.fragment,e),ee(f.$$.fragment,e),ee(d.$$.fragment,e),ee(p.$$.fragment,e),ee($.$$.fragment,e),a=!1},d(e){e&&h(n),ce(l),ce(u),ce(f),ce(d),ce(p),ce($)}}}function wt(e){var t;return t=async()=>{fetch("./data/Counties_and_Unitary_Authorities_April_2019_Boundaries_EW_BUC.json").then(e=>e.json()).then(e=>Me.set(e)).then(()=>fetch("./data/Coronavirus-COVID-19-number-of-cases-in-England.json")).then(e=>e.json()).then(e=>{Le.set(e.Labels),Pe.set(e.Summary),Te.set(e.CasesByRegion)}).catch(e=>console.error(e))},I().$$.on_mount.push(t),[]}var xt=new class extends le{constructor(e){super(),ae(this,e,wt,bt,c,{})}}({target:document.body});return window.app=xt,xt}();
